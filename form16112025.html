<!DOCTYPE html>
<html lang="pt-BR">
   <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Secretaria de Administra√ß√£o - SAD ‚Äî Sele√ß√£o Simplificada Hospital Veterin√°rio do Recife</title>
    <link
      rel="icon"
      href="https://statics.recife.pe.gov.br/images/dynamics/conecta/icons/favicon.png?w=32&h=32&fit=fill&border=2,transparent,shrink"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
      :root {
        --brand-primary: #0053a4;
        --brand-secondary: #003a73;
        --brand-highlight: #00a3ff;
        --surface: #f4f7fb;
        --surface-strong: #ffffff;
        --border-color: #d0d7e2;
        --text-strong: #1b263b;
        --text-muted: #5b6c8c;
      }

      *, *::before, *::after {
        box-sizing: border-box;
      }

      body {
        font-family: "Public Sans", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: var(--surface);
        color: var(--text-strong);
        min-height: 100vh;
      }

      header.site-header {
        background: url("https://statics.recife.pe.gov.br/images/dynamics/automacao/header.png?w=3000")
          center/cover no-repeat;
        color: #ffffff;
        padding: 3.5rem 0 2.75rem;
      }

      header .lead {
        color: rgba(255, 255, 255, 0.82);
        max-width: 100%;
        font-size: 1rem;
        line-height: 1.65;
        text-align: justify;
      }

      .badge-open {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.95rem;
        font-weight: 600;
        padding: 0.45rem 0.9rem;
        border-radius: 999px;
        background-color: rgba(255, 255, 255, 0.14);
      }

      .user-greeting {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-size: 1.05rem;
        font-weight: 600;
        margin-bottom: 2rem;
        padding: 1rem 1.5rem;
        border-radius: 1rem;
        background: linear-gradient(135deg, rgba(0, 83, 164, 0.09), rgba(0, 163, 255, 0.12));
        color: var(--text-strong);
        box-shadow: 0 10px 30px rgba(0, 45, 98, 0.08);
      }

      .user-greeting::before {
        content: "üëã";
        font-size: 1.4rem;
      }

      .minhas-inscricoes-grid {
        margin-top: 1rem;
      }

      .minhas-inscricao-card {
        cursor: pointer;
        transition: transform 0.18s ease, box-shadow 0.18s ease;
        border: 1px solid rgba(0, 83, 164, 0.12);
        border-radius: 4px;
      }

      .minhas-inscricao-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 30px rgba(0, 45, 98, 0.12);
      }

      .minhas-inscricao-card.is-loading {
        pointer-events: none;
        opacity: 0.7;
      }

      .minhas-inscricoes-placeholder {
        padding: 1.25rem;
        border-radius: 4px;
        background: rgba(0, 83, 164, 0.05);
        border: 1px dashed rgba(0, 83, 164, 0.2);
        color: var(--text-muted);
      }

      .resumo-inscricao-list dt {
        font-size: 0.75rem;
        letter-spacing: 0.05em;
        text-transform: uppercase;
        color: var(--text-muted);
      }

      .resumo-inscricao-list dd {
        font-weight: 600;
        color: var(--text-strong);
      }

      .resumo-inscricao-pre {
        background: rgba(0, 83, 164, 0.06);
        border-radius: 0.75rem;
        padding: 0.75rem;
        white-space: pre-wrap;
        font-size: 0.85rem;
        margin-bottom: 0;
      }

      .card {
        border-radius: 4px;
        overflow: hidden;
      }

      .rounded-4 {
        border-radius: 4px !important;
      }

      .collapsible-form {
        border: 1px solid rgba(0, 83, 164, 0.15);
        border-radius: 4px;
        background: rgba(0, 83, 164, 0.05);
        padding: 1rem 1.25rem;
      }

      .collapsible-form summary {
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        list-style: none;
      }

      .collapsible-form summary::marker {
        display: none;
      }

      .collapsible-form summary::-webkit-details-marker {
        display: none;
      }

      .collapsible-form summary::before {
        content: "‚ûï";
        font-size: 0.9rem;
        transition: transform 0.2s ease;
      }

      .collapsible-form[open] summary::before {
        transform: rotate(45deg);
      }

      .collapsible-form .form-label {
        font-weight: 600;
        color: var(--text-strong);
      }

      .collapsible-form .form-text {
        color: var(--text-muted);
      }

      .feedback-modal-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(27, 38, 59, 0.45);
        display: none;
        align-items: center;
        justify-content: center;
        padding: 1.5rem;
        z-index: 1050;
      }

      .feedback-modal-backdrop.active {
        display: flex;
      }

      .feedback-modal {
        background: #ffffff;
        border-radius: 1rem;
        max-width: 420px;
        width: 100%;
        box-shadow: 0 24px 60px rgba(0, 0, 0, 0.18);
        padding: 1.75rem;
        margin: 0 auto;
      }

      .feedback-modal.feedback-modal--wide {
        max-width: 860px;
      }

      .feedback-modal-title {
        font-weight: 700;
        font-size: 1.1rem;
        margin-bottom: 0.75rem;
        color: var(--text-strong);
      }

      .feedback-modal-message {
        font-size: 0.95rem;
        line-height: 1.6;
        color: var(--text-strong);
        max-height: 60vh;
        overflow-y: auto;
        overflow-x: hidden;
        word-break: break-word;
      }

      .feedback-modal-message > :last-child {
        margin-bottom: 0;
      }

      .feedback-modal button {
        border-radius: 999px;
        padding-inline: 1.5rem;
        font-weight: 600;
      }

      #publicacoes-list time {
        font-size: 0.8rem;
        font-weight: 600;
        text-transform: uppercase;
        color: var(--brand-secondary);
        letter-spacing: 0.05em;
      }

      .section-title {
        display: flex;
        align-items: center;
        gap: 0.65rem;
        font-weight: 700;
        font-size: 1.2rem;
        letter-spacing: 0.02em;
        color: var(--text-strong);
      }

      .section-title::before {
        content: "";
        display: inline-block;
        width: 32px;
        height: 3px;
        border-radius: 999px;
        background: var(--brand-highlight);
      }

      .card-programa {
        border: 1px solid rgba(0, 83, 164, 0.08);
        border-radius: 4px;
        background: var(--surface-strong);
        box-shadow: 0 16px 34px rgba(0, 45, 98, 0.08);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        height: 100%;
      }

      .card-programa:hover {
        transform: translateY(-6px);
        box-shadow: 0 20px 38px rgba(0, 45, 98, 0.12);
      }

      .card-programa .card-header {
        border-bottom: 1px solid rgba(0, 83, 164, 0.08);
        background: linear-gradient(180deg, #ffffff 0%, #f5f8fc 100%);
        padding: 1.5rem 1.6rem 1.1rem;
        border-radius: 4px 4px 0 0;
      }

      .card-programa .card-body {
        padding: 1.6rem 1.6rem 1.75rem;
        border-radius: 0 0 4px 4px;
      }

      .card-programa .badge {
        border-radius: 999px;
        font-weight: 600;
        letter-spacing: 0.04em;
      }

      .card-programa ul {
        padding-left: 1.25rem;
        margin-bottom: 1.25rem;
        color: var(--text-muted);
      }

      .card-programa .btn {
        border-radius: 999px;
        padding-inline: 1.6rem;
        font-weight: 600;
        letter-spacing: 0.01em;
      }

      .downloads-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.25rem;
      }

      .download-card {
        border: 1px solid var(--border-color);
        background: var(--surface-strong);
        border-radius: 4px;
        padding: 1.35rem 1.4rem;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        min-height: 170px;
      }

      .publicacoes-panel,
      .updates-panel {
        border-radius: 4px;
      }

      .download-card strong {
        font-size: 1rem;
        color: var(--text-strong);
      }

      .download-card p {
        margin: 0;
        color: var(--text-muted);
        font-size: 0.95rem;
        line-height: 1.4;
      }

      .download-card a {
        font-weight: 600;
      }

      #publicacoes-list li + li {
        margin-top: 0.75rem;
      }

      .publicacoes-item {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .publicacoes-item-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 600;
      }

      .publicacoes-item-icon {
        display: inline-block;
        width: 1.5rem;
        height: 1.5rem;
        flex-shrink: 0;
        background-repeat: no-repeat;
        background-position: center;
        background-size: contain;
      }

      .publicacoes-item-icon--pdf {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23d32f2f' d='M6 2h7l5 5v15a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z'/%3E%3Cpath fill='%23ef5350' d='M13 2v5h5'/%3E%3Ctext x='12' y='17' text-anchor='middle' font-family='Arial, sans-serif' font-size='7' font-weight='700' fill='%23fff'%3EPDF%3C/text%3E%3C/svg%3E");
      }

      .publicacoes-item-icon--image {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Crect x='3' y='4' width='18' height='16' rx='2' fill='%23215695'/%3E%3Crect x='4.5' y='5.5' width='15' height='13' rx='1.2' fill='%233968c8'/%3E%3Ccircle cx='9' cy='11' r='2.2' fill='%23fff59d'/%3E%3Cpath fill='%23c5cae9' d='M6 18l4.2-4.6 2.7 3.2 2.6-3L18 18z'/%3E%3C/svg%3E");
      }

      .publicacoes-item-icon--generic {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%233f51b5' d='M7 2h7l5 5v15a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z'/%3E%3Cpath fill='%235c6bc0' d='M14 2v5h5'/%3E%3Crect x='8.5' y='12' width='7' height='1.5' rx='.75' fill='%23c5cae9'/%3E%3Crect x='8.5' y='15' width='5' height='1.5' rx='.75' fill='%23c5cae9'/%3E%3C/svg%3E");
      }

      .publicacoes-item time {
        flex-shrink: 0;
      }

      @media (min-width: 576px) {
        .publicacoes-item {
          flex-direction: row;
          align-items: center;
          justify-content: space-between;
        }
      }

      @media (max-width: 575.98px) {
        .publicacoes-item-link {
          align-items: flex-start;
        }
      }

      .updates-panel {
        border-left: 3px solid var(--brand-highlight);
        padding-left: 1.2rem;
        color: var(--text-muted);
      }

      .updates-panel time {
        font-size: 0.85rem;
        color: var(--brand-secondary);
        font-weight: 600;
        letter-spacing: 0.05em;
        text-transform: uppercase;
      }

      footer {
        color: var(--text-muted);
        padding: 2.5rem 0 2rem;
        font-size: 0.9rem;
      }

      @media (max-width: 768px) {
        header.site-header {
          padding: 2.5rem 0 2rem;
        }

        .badge-open {
          width: 100%;
          justify-content: center;
        }

        .section-title {
          justify-content: flex-start;
        }
      }
    </style>
  </head>

  <body>
    <header class="site-header">
      <div class="container hero-container">
        <span class="badge-open">Secretaria de Administra√ß√£o - SAD - Prefeitura do Recife</span>
        <h1 class="display-6 fw-semibold mt-3">Sele√ß√£o Simplificada Hospital Veterin√°rio do Recife</h1>
        <p class="lead mt-2">
          Inscri√ß√µes abertas at√© 23:59:59 do dia 31 de outubro de 2025
        </p>
      </div>
    </header>
    <!--<header class="hero">
      <img
        src="https://statics.recife.pe.gov.br/images/dynamics/zonaazul/banner.jpeg"
        alt="Hospital Veterin√°rio do Recife"
        class="hero-image"
      />
       <div class="hero-content">
        <span class="hero-badge">Secretaria de Administra√ß√£o - SAD</span>
        <h1 class="hero-title">Sele√ß√£o Simplificada ‚Äî Hospital Veterin√°rio do Recife</h1>
        <p class="hero-subtitle">Complete as etapas abaixo para enviar sua inscri√ß√£o</p>
      </div>
    </header> -->
    <div class="pattern-top"></div>

    <main class="frame-card container">
      <section class="wizard-shell">
        <div class="wizard-header-row">
          <h2 class="wizard-heading">Etapas da inscri√ß√£o</h2>
          <div class="registration-badge" id="registrationNumber" aria-live="polite">
            <span class="registration-label">N¬∫ da inscri√ß√£o</span>
            <span class="registration-value">{{ String($json.inscricao ?? '').trim() || '‚Äî' }}</span>
          </div>
        </div>
        <ol class="wizard-steps" id="wizardSteps" role="tablist">
          <li class="wizard-step active" data-step="0" role="tab" aria-selected="true" tabindex="0">
            <span class="wizard-index"><span class="wizard-index-label" data-step-index="1">1</span></span>
            <span class="wizard-label">Dados pessoais</span>
          </li>
          <li class="wizard-step" data-step="1" role="tab" aria-selected="false" tabindex="-1">
            <span class="wizard-index"><span class="wizard-index-label" data-step-index="2">2</span></span>
            <span class="wizard-label">Endere√ßo e contato</span>
          </li>
          <li class="wizard-step" data-step="2" role="tab" aria-selected="false" tabindex="-1">
            <span class="wizard-index"><span class="wizard-index-label" data-step-index="3">3</span></span>
            <span class="wizard-label">Perfil profissional</span>
          </li>
          <li class="wizard-step" data-step="3" role="tab" aria-selected="false" tabindex="-1">
            <span class="wizard-index"><span class="wizard-index-label" data-step-index="4">4</span></span>
            <span class="wizard-label">Documentos</span>
          </li>
          <li class="wizard-step" data-step="4" role="tab" aria-selected="false" tabindex="-1">
            <span class="wizard-index"><span class="wizard-index-label" data-step-index="5">5</span></span>
            <span class="wizard-label">Revis√£o</span>
          </li>
        </ol>
      </section>

      <form
        id="inscricaoForm"
        class="needs-validation"
        novalidate
        method="post"
        action="https://webhook-n8n-dev-conectarecife.recife.pe.gov.br/webhook/83d7be28-a3ca-4aca-80be-13155dd4d497"
        enctype="multipart/form-data"
      >
        <input
          type="hidden"
          id="initialAuthorization"
          name="authorization"
          value="{{ String($json.authorization ?? $json.Authorization ?? '') }}"
        />

        <input
          type="hidden"
          name="inscricao"
          value="{{ String($json.inscricao ?? '').trim() }}"
        />

        <input
          type="hidden"
          id="cargosInscritos"
          value='{{ JSON.stringify($json.cargos_inscritos ?? []) }}'
        />

        <section class="card step-card" data-step-panel="0">
          <div class="card-header">
            <h2>Identifica√ß√£o do candidato</h2>
          </div>
          <div class="card-body">
            <div class="section-block">
              <h3 class="section-title">Dados b√°sicos</h3>
              <p class="section-subtitle">Informe seus dados pessoais conforme documento oficial.</p>
              <div class="row g-3">
                <div class="col-12 col-md-6 col-lg-6">
                  <label for="nome" class="form-label required">Nome completo</label>
                  <input
                    type="text"
                    class="form-control"
                    id="nome"
                    name="nome"
                    value="{{ String($json.nome ?? $json.name ?? '').trim() || String($json.nome_social ?? $json.socialName ?? '').trim().toUpperCase() }}"
                    required
                    readonly
                  />
                </div>
                <div class="col-12 col-md-4 col-lg-4">
                  <label for="nome_social" class="form-label">Nome social</label>
                  <input
                    type="text"
                    class="form-control"
                    id="nome_social"
                    name="nome_social"
                    value="{{ String($json.nome_social ?? $json.socialName ?? '').trim().toUpperCase() }}"
                  />
                </div>
                <div class="col-12 col-md-2 col-lg-2">
                  <label for="cpf" class="form-label required">CPF</label>
                  <input
                    type="text"
                    class="form-control"
                    id="cpf"
                    name="cpf"
                    maxlength="11"
                    inputmode="numeric"
                    pattern="\d{11}"
                    title="Informe 11 d√≠gitos"
                    data-numeric-only="true"
                    value="{{ String(($json.cpf ?? $json.preferred_username ?? '')).replace(/\D+/g, '').slice(0,11) }}"
                    required
                    readonly
                  />
                </div>
                <div class="col-12 col-md-4">
                  <label for="nasc" class="form-label required">Data de nascimento</label>
                  <input
                    type="date"
                    class="form-control"
                    id="nasc"
                    name="nasc"
                    value="{{ (($json.nasc ?? $json.dob) || '').split('/').reverse().join('-') }}"
                    required
                    readonly
                  />
                </div>
                <div class="col-md-4">
                  <label for="nacionalidade" class="form-label required">Nacionalidade</label>
                  <select
                    id="nacionalidade"
                    name="nacionalidade"
                    class="form-select"
                    data-prefill="{{ $json.nacionalidade ?? $json.nationality ?? '' }}"
                    data-nacionalidade
                    required
                  >
                    <option value="">Selecione...</option>
                    <option value="BRASILEIRA">BRASILEIRA</option>
                  </select>
                </div>
                <div class="col-md-4">
                  <label for="nis" class="form-label">NIS</label>
                  <input
                    type="text"
                    class="form-control"
                    id="nis"
                    name="nis"
                    maxlength="11"
                    inputmode="numeric"
                    pattern="\d{0,11}"
                    title="Informe apenas n√∫meros (at√© 11 d√≠gitos)"
                    data-numeric-only="true"
                    value="{{ String($json.nis ?? $json.pis ?? $json.pis_pasep ?? '').replace(/\D+/g, '').slice(0,11) }}"
                  />
                </div>
              </div>
            </div>

            <div class="section-block">
              <h3 class="section-title">Naturalidade e filia√ß√£o</h3>
              <div class="row g-3 mb-1">
                <div class="col-md-5 col-lg-6">
                  <label for="naturalidade_cidade" class="form-label required">Naturalidade</label>
                  <input
                    type="text"
                    class="form-control"
                    id="naturalidade_cidade"
                    name="naturalidade_cidade"
                    value="{{ String($json.naturalidade ?? '').trim().toUpperCase() }}"
                    required
                  />
                </div>
                <div class="col-md-2 col-lg-3 col-xl-2">
                  <label for="naturalidade_uf" class="form-label required">UF</label>
                  <select
                    id="naturalidade_uf"
                    name="naturalidade_uf"
                    class="form-select"
                    data-prefill="{{ $json.uf_naturalidade ?? '' }}"
                    data-uf-select
                    data-force-required="true"
                    required
                  >
                    <option value="">Selecione...</option>
                  </select>
                </div>
              </div>
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="mae" class="form-label required">Nome da m√£e</label>
                  <input
                    type="text"
                    class="form-control text-uppercase"
                    id="mae"
                    name="mae"
                    value="{{ String($json.mae ?? $json.motherName ?? '').trim().toUpperCase() }}"
                   
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label for="pai" class="form-label">Nome do pai</label>
                  <input
                    type="text"
                    class="form-control text-uppercase"
                    id="pai"
                    name="pai"
                    value="{{ String($json.pai ?? $json.fatherName ?? '').trim().toUpperCase() }}"
                   
                  />
                </div>
              </div>
            </div>

            <div class="section-block">
              <h3 class="section-title">Documentos de identifica√ß√£o</h3>
              <div class="row g-3">
                <div class="col-md-4">
                  <label for="rg_numero" class="form-label required">RG</label>
                  <input
                    type="text"
                    class="form-control"
                    id="rg_numero"
                    name="rg_numero"
                    maxlength="14"
                    inputmode="numeric"
                    pattern="\d{1,14}"
                    title="Informe apenas n√∫meros"
                    data-numeric-only="true"
                    value="{{ String($json.num_doc ?? '').replace(/\D+/g, '').slice(0,14) }}"
                    required
                  />
                </div>
                <div class="col-md-4">
                  <label for="rg_orgao" class="form-label required">√ìrg√£o emissor</label>
                  <input
                    type="text"
                    class="form-control"
                    id="rg_orgao"
                    name="rg_orgao"
                    value="{{ String($json.orgao ?? '').trim().toUpperCase() }}"
                    required
                  />
                </div>
                <div class="col-md-2">
                  <label for="rg_uf" class="form-label required">UF</label>
                  <select
                    id="rg_uf"
                    name="rg_uf"
                    class="form-select"
                    data-prefill="{{ $json.uf_doc ?? '' }}"
                    data-uf-select
                    required
                  >
                    <option value="">Selecione...</option>
                  </select>
                </div>
                <div class="col-md-2">
                  <label for="rg_data" class="form-label required">Expedi√ß√£o</label>
                  <input
                    type="date"
                    class="form-control"
                    id="rg_data"
                    name="rg_data"
                    value="{{ String($json.exp_doc ?? '').split('/').reverse().join('-') }}"
                    required
                  />
                </div>
              </div>
            </div>

            <div class="section-block">
              <h3 class="section-title">Informa√ß√µes complementares</h3>
              <div class="row g-3">
                <div class="col-md-4">
                  <label for="sexo" class="form-label required">Sexo</label>
                  <select id="sexo" name="sexo" class="form-select" data-prefill="{{ $json.sexo ?? $json.sex ?? $json.genero ?? $json.gender ?? '' }}" required>
                    <option value="">Selecione...</option>
                    <option value="Feminino">Feminino</option>
                    <option value="Masculino">Masculino</option>
                    <option value="Prefiro n√£o informar">Prefiro n√£o informar</option>
                  </select>
                </div>
                <div class="col-md-4">
                  <label for="genero" class="form-label required">G√™nero</label>
                  <select
                    id="genero"
                    name="genero"
                    class="form-select"
                    data-prefill="{{ $json.genero ?? $json.genero_identidade ?? $json.genderIdentity ?? $json.gender ?? $json.sexo ?? '' }}"
                    required
                  >
                    <option value="">Selecione...</option>
                    <option value="Mulher cisg√™nero">Mulher cisg√™nero</option>
                    <option value="Mulher trans">Mulher trans</option>
                    <option value="Homem cisg√™nero">Homem cisg√™nero</option>
                    <option value="Homem trans">Homem trans</option>
                    <option value="Pessoa n√£o bin√°ria">Pessoa n√£o bin√°ria</option>
                    <option value="Travesti">Travesti</option>
                    <option value="Outro">Outro</option>
                    <option value="Prefiro n√£o informar">Prefiro n√£o informar</option>
                  </select>
                </div>
                <div class="col-md-4 hidden" id="generoOutroGroup">
                  <label for="genero_outro" class="form-label">Informe o g√™nero</label>
                  <input
                    type="text"
                    class="form-control"
                    id="genero_outro"
                    name="genero_outro"
                    maxlength="80"
                    placeholder="Descreva o g√™nero"
                    value="{{ String($json.genero_outro ?? '').trim() }}"
                  />
                </div>
                <div class="col-md-4">
                  <label for="estado_civil" class="form-label required">Estado civil</label>
                  <select id="estado_civil" name="estado_civil" class="form-select" data-prefill="{{ $json.estado_civil ?? $json.maritalStatus ?? '' }}" required>
                    <option value="">Selecione...</option>
                    <option value="Solteiro(a)">Solteiro(a)</option>
                    <option value="Casado(a)">Casado(a)</option>
                    <option value="Uni√£o est√°vel">Uni√£o est√°vel</option>
                    <option value="Divorciado(a)">Divorciado(a)</option>
                    <option value="Vi√∫vo(a)">Vi√∫vo(a)</option>
                    <option value="Separado(a)">Separado(a)</option>
                  </select>
                </div>
                <div class="col-md-4">
                  <label for="raca" class="form-label required">Cor/Ra√ßa (IBGE)</label>
                  <select id="raca" name="raca" class="form-select" data-prefill="{{ $json.raca ?? $json.race ?? '' }}" required>
                    <option value="">Selecione...</option>
                    <option value="Branca">Branca</option>
                    <option value="Preta">Preta</option>
                    <option value="Parda">Parda</option>
                    <option value="Amarela">Amarela</option>
                    <option value="Ind√≠gena">Ind√≠gena</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer bg-transparent border-top-0 pt-0">
            <div class="wizard-controls">
              <button type="button" class="btn btn-outline-secondary" id="prevBtn0" disabled>Voltar</button>
              <div class="spacer"></div>
              <button type="button" class="btn btn-outline-secondary" data-action="save-draft">Salvar rascunho</button>
              <button type="button" class="btn btn-primary" data-action="next">Avan√ßar</button>
            </div>
          </div>
        </section>
        <section class="card step-card d-none" data-step-panel="1">
          <div class="card-header">
            <h2>Endere√ßo e contato</h2>
          </div>
          <div class="card-body">
            <div class="section-block">
              <h3 class="section-title">Contato</h3>
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="email" class="form-label required">E-mail</label>
                  <input
                    type="email"
                    class="form-control"
                    id="email"
                    name="email"
                    data-allow-lowercase="true"
                    value="{{ String($json.email ?? '').trim().toLowerCase() }}"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label for="email_confirm" class="form-label required">Confirme o e-mail</label>
                  <input
                    type="email"
                    class="form-control"
                    id="email_confirm"
                    name="email_confirm"
                    data-allow-lowercase="true"
                    value=""
                    required
                  />
                </div>
                <div class="col-md-4">
                  <label for="tel1" class="form-label required">Telefone 1</label>
                  <input
                    type="text"
                    class="form-control"
                    id="tel1"
                    name="tel1"
                    maxlength="11"
                    inputmode="numeric"
                    placeholder="DDD + n√∫mero"
                    value="{{ String($json.telefone1 ?? $json.telefone ?? $json.phone ?? '').replace(/\D+/g, '') }}"
                    required
                  />
                </div>
                <div class="col-md-4">
                  <label for="tel2" class="form-label">Telefone 2</label>
                  <input
                    type="text"
                    class="form-control"
                    id="tel2"
                    name="tel2"
                    maxlength="11"
                    inputmode="numeric"
                    placeholder="DDD + n√∫mero"
                    value="{{ String($json.telefone2 ?? $json.phone2 ?? '').replace(/\D+/g, '') }}"
                  />
                </div>
              </div>
            </div>

            <div class="section-block">
              <h3 class="section-title">Endere√ßo residencial</h3>
              <div class="row g-3">
                <div class="col-md-3">
                  <label for="cep" class="form-label required">CEP</label>
                  <input
                    type="text"
                    class="form-control"
                    id="cep"
                    name="cep"
                    maxlength="8"
                    inputmode="numeric"
                    placeholder="00000-000"
                    value="{{ String($json.postal_code ?? $json.cep ?? '').replace(/\D+/g, '') }}"
                    required
                  />
                </div>
                <div class="col-md-5">
                  <label for="logradouro" class="form-label required">Logradouro</label>
                  <input
                    type="text"
                    class="form-control"
                    id="logradouro"
                    name="logradouro"
                    value="{{ String($json.addressStreet ?? $json.logradouro ?? '').trim().toUpperCase() }}"
                    required
                  />
                </div>
                <div class="col-md-2">
                  <label for="numero" class="form-label required">N√∫mero</label>
                  <input
                    type="text"
                    class="form-control"
                    id="numero"
                    name="numero"
                    value="{{ String($json.numero ?? $json.addressNumber ?? '').trim().toUpperCase() }}"
                    required
                  />
                </div>
                <div class="col-md-2">
                  <label for="complemento" class="form-label">Complemento</label>
                  <input
                    type="text"
                    class="form-control"
                    id="complemento"
                    name="complemento"
                    value="{{ String($json.complemento ?? $json.addressComplement ?? '').trim().toUpperCase() }}"
                  />
                </div>
                <div class="col-md-4">
                  <label for="bairro" class="form-label required">Bairro</label>
                  <input
                    type="text"
                    class="form-control"
                    id="bairro"
                    name="bairro"
                    value="{{ String($json.neighborhood ?? $json.bairro ?? '').trim().toUpperCase() }}"
                    required
                  />
                </div>
                <div class="col-md-4">
                  <label for="cidade" class="form-label required">Cidade</label>
                  <input
                    type="text"
                    class="form-control"
                    id="cidade"
                    name="cidade"
                    value="{{ String($json.cidade ?? $json.locality ?? $json.city ?? '').trim().toUpperCase() }}"
                    required
                  />
                </div>
                <div class="col-md-2">
                  <label for="uf" class="form-label required">UF</label>
                  <input
                    type="text"
                    class="form-control"
                    id="uf"
                    name="uf"
                    maxlength="2"
                    value="{{ String(($json.state ?? $json.addressState ?? $json.uf ?? '')).trim().toUpperCase() }}"
                    required
                  />
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer bg-transparent border-top-0 pt-0">
            <div class="wizard-controls">
              <button type="button" class="btn btn-outline-secondary" data-action="prev">Voltar</button>
              <div class="spacer"></div>
              <button type="button" class="btn btn-outline-secondary" data-action="save-draft">Salvar rascunho</button>
              <button type="button" class="btn btn-primary" data-action="next">Avan√ßar</button>
            </div>
          </div>
        </section>
        <section class="card step-card d-none" data-step-panel="2">
          <div class="card-header">
            <h2>Perfil profissional e v√≠nculos</h2>
          </div>
          <div class="card-body">
            <div class="section-block">
              <h3 class="section-title">Forma√ß√£o acad√™mica</h3>
              <div class="row g-3">
                <div class="col-md-4">
                  <label for="nivel" class="form-label required">N√≠vel</label>
                  <select id="nivel" name="nivel" class="form-select" data-prefill="{{ $json.nivel ?? $json.nivel_escolaridade ?? $json.escolaridade ?? '' }}" required>
                    <option value="">Selecione...</option>
                    <option value="M√©dio">M√©dio</option>
                    <option value="T√©cnico">T√©cnico</option>
                    <option value="Gradua√ß√£o">Gradua√ß√£o</option>
                    <option value="P√≥s-gradua√ß√£o">P√≥s-gradua√ß√£o</option>
                    <option value="Mestrado">Mestrado</option>
                    <option value="Doutorado">Doutorado</option>
                  </select>
                </div>
                <div class="col-md-4">
                  <label for="ies" class="form-label required">Institui√ß√£o</label>
                  <input
                    type="text"
                    class="form-control"
                    id="ies"
                    name="ies"
                    value="{{ String($json.instituicao ?? $json.ies ?? '').trim().toUpperCase() }}"
                    required
                  />
                </div>
                <div class="col-md-4">
                  <label for="curso" class="form-label required">Curso</label>
                  <input
                    type="text"
                    class="form-control"
                    id="curso"
                    name="curso"
                    value="{{ String($json.curso ?? '').trim().toUpperCase() }}"
                    required
                  />
                </div>
                <div class="col-md-3">
                  <label for="ano_conclusao" class="form-label required">Ano de conclus√£o</label>
                  <input
                    type="text"
                    class="form-control"
                    id="ano_conclusao"
                    name="ano_conclusao"
                    maxlength="4"
                    inputmode="numeric"
                    pattern="\d{4}"
                    title="Informe 4 d√≠gitos"
                    data-numeric-only="true"
                    value="{{ String($json.ano ?? $json.ano_conclusao ?? '').replace(/\D+/g, '').slice(0,4) }}"
                    required
                  />
                </div>
              </div>
            </div>

            <div class="section-block">
              <h3 class="section-title">Atua√ß√£o profissional</h3>
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="cargo" class="form-label required">Cargo pretendido</label>
                  <select id="cargo" name="cargo" class="form-select" data-prefill="{{ $json.cargo ?? $json.cargo_pretendido ?? '' }}" required>
                    <option value="">Selecione...</option>
                    <option value="Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h">Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h</option>
                    <option value="Analista em Sa√∫de Animal ‚Äì Veterin√°rio 20h">Analista em Sa√∫de Animal ‚Äì Veterin√°rio 20h</option>
                    <option value="Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h Plantonista">Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h Plantonista</option>
                    <option value="Auxiliar em Sa√∫de Animal - Auxiliar Veterin√°rio 40h">Auxiliar em Sa√∫de Animal - Auxiliar Veterin√°rio 40h</option>
                    <option value="Auxiliar em Sa√∫de Animal - Auxiliar Veterin√°rio 40h Plantonista">Auxiliar em Sa√∫de Animal - Auxiliar Veterin√°rio 40h Plantonista</option>
                    <option value="T√©cnico em Sa√∫de Animal - Radiologia e Imagenologia 24h">T√©cnico em Sa√∫de Animal - Radiologia e Imagenologia 24h</option>
                  </select>
                </div>
                <div class="col-md-6 d-none" id="especialidadeGroup">
                  <label for="especialidade" class="form-label required">Especialidade (quando houver)</label>
                  <select
                    class="form-select"
                    id="especialidade"
                    name="especialidade"
                    data-prefill="{{ String($json.especialidade ?? '').trim() }}"
                  >
                    <option value="">Selecione...</option>
                  </select>
                </div>
                <div
                  class="col-md-4 hidden"
                  id="militarGroup"
                  data-prefill-radio="{{ String($json.militar ?? '').trim().toUpperCase() }}"
                >
                  <span class="form-label required">Servi√ßo militar obrigat√≥rio quitado?</span>
                  <div class="d-flex gap-3">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="radio"
                        name="militar"
                        id="militar_sim"
                        value="SIM"
                        data-force-required="true"
                      />
                      <label class="form-check-label" for="militar_sim">Sim</label>
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="radio"
                        name="militar"
                        id="militar_nao"
                        value="NAO"
                        data-force-required="true"
                      />
                      <label class="form-check-label" for="militar_nao">N√£o</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div id="alistamentoWrapper" class="section-block hidden">
              <h3 class="section-title">Certificado de reservista</h3>
              <div class="row g-3">
                <div class="col-md-4">
                  <label for="alistamento_numero" class="form-label">N√∫mero</label>
                  <input
                    type="text"
                    class="form-control"
                    id="alistamento_numero"
                    name="alistamento_numero"
                    maxlength="12"
                    inputmode="numeric"
                    pattern="\d{12}"
                    title="Informe 12 d√≠gitos"
                    data-numeric-only="true"
                    value="{{ String($json.alistamento_numero ?? '').replace(/\D+/g, '').slice(0,12) }}"
                    data-force-required="true"
                  />
                </div>
                <div class="col-md-4">
                  <label for="alistamento_orgao" class="form-label">√ìrg√£o emissor</label>
                  <input
                    type="text"
                    class="form-control"
                    id="alistamento_orgao"
                    name="alistamento_orgao"
                    value="{{ String($json.alistamento_orgao ?? '').trim().toUpperCase() }}"
                    data-force-required="true"
                  />
                </div>
                <div class="col-md-4">
                  <label for="alistamento_data" class="form-label">Data de emiss√£o</label>
                  <input
                    type="date"
                    class="form-control"
                    id="alistamento_data"
                    name="alistamento_data"
                    value="{{ String($json.alistamento_data ?? '').split('/').reverse().join('-') }}"
                    data-force-required="true"
                  />
                </div>
              </div>
            </div>

            <div class="section-block">
              <h3 class="section-title">Situa√ß√£o eleitoral</h3>
              <div class="row g-3">
                <div class="col-md-4">
                  <label for="titulo" class="form-label required">T√≠tulo de Eleitor</label>
                  <input
                    type="text"
                    class="form-control"
                    id="titulo"
                    name="titulo"
                    maxlength="12"
                    inputmode="numeric"
                    pattern="\d{0,12}"
                    title="Informe apenas n√∫meros"
                    data-numeric-only="true"
                    value="{{ String($json.titulo ?? $json.titulo_eleitor ?? '').replace(/\D+/g, '').slice(0,12) }}"
                    required
                    data-force-required="true"
                  />
                </div>
                <div class="col-md-4">
                  <label for="zona" class="form-label required">Zona</label>
                  <input
                    type="text"
                    class="form-control"
                    id="zona"
                    name="zona"
                    maxlength="4"
                    inputmode="numeric"
                    pattern="\d{0,4}"
                    title="Informe apenas n√∫meros"
                    data-numeric-only="true"
                    value="{{ String($json.zona ?? '').replace(/\D+/g, '').slice(0,4) }}"
                    required
                    data-force-required="true"
                  />
                </div>
                <div class="col-md-4">
                  <label for="secao" class="form-label required">Se√ß√£o</label>
                  <input
                    type="text"
                    class="form-control"
                    id="secao"
                    name="secao"
                    maxlength="4"
                    inputmode="numeric"
                    pattern="\d{0,4}"
                    title="Informe apenas n√∫meros"
                    data-numeric-only="true"
                    value="{{ String($json.secao ?? '').replace(/\D+/g, '').slice(0,4) }}"
                    required
                    data-force-required="true"
                  />
                </div>
              </div>
            </div>

            <div class="section-block">
              <h3 class="section-title">Experi√™ncias adicionais</h3>
              <div class="row g-3">
                <div class="col-md-4" data-prefill-radio="{{ String($json.jurado ?? $json.foi_jurado ?? '').trim().toUpperCase() }}">
                  <span class="form-label">J√° atuou como jurado(a)?</span>
                  <div class="d-flex gap-3">
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="jurado_funcao" id="jurado_sim" value="SIM" />
                      <label class="form-check-label" for="jurado_sim">Sim</label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="jurado_funcao" id="jurado_nao" value="NAO" />
                      <label class="form-check-label" for="jurado_nao">N√£o</label>
                    </div>
                  </div>
                </div>
                <div class="col-md-8 hidden" id="juradoDetalhes">
                  <label for="jurado_periodo" class="form-label">Informa√ß√µes sobre atua√ß√£o como jurado(a)</label>
                  <input
                    type="text"
                    class="form-control"
                    id="jurado_periodo"
                    name="jurado_periodo"
                    placeholder="Tribunal, per√≠odo ou outros detalhes"
                    value="{{ String($json.jurado_periodo ?? '').trim() }}"
                  />
                </div>
                <div class="col-md-4">
                  <span class="form-label">Possui algum outro v√≠nculo com o servi√ßo p√∫blico?</span>
                  <div class="d-flex gap-3" data-prefill-radio="{{ String($json.vinculo_publico ?? '').trim() }}">
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="vinculo_publico_opcao" id="vinculo_publico_sim" value="Sim" />
                      <label class="form-check-label" for="vinculo_publico_sim">Sim</label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="vinculo_publico_opcao" id="vinculo_publico_nao" value="N√£o" />
                      <label class="form-check-label" for="vinculo_publico_nao">N√£o</label>
                    </div>
                  </div>
                </div>
                <div class="col-12 hidden" id="qualVinculoGroup">
                  <label for="qual_vinculo" class="form-label">Qual v√≠nculo?</label>
                  <input
                    type="text"
                    class="form-control text-uppercase"
                    id="qual_vinculo"
                    name="qual_vinculo"
                    value="{{ String($json.qual_vinculo ?? '').trim().toUpperCase() }}"
                   
                    data-force-required="true"
                  />
                </div>
                <div class="col-12 hidden" id="vinculoCargoGroup">
                  <label for="vinculo_cargo" class="form-label">Cargo</label>
                  <input
                    type="text"
                    class="form-control text-uppercase"
                    id="vinculo_cargo"
                    name="vinculo_cargo"
                    value="{{ String($json.vinculo_cargo ?? '').trim().toUpperCase() }}"
                   
                    data-force-required="true"
                  />
                </div>
                <div class="col-12 hidden" id="vinculoOrgaoGroup">
                  <label for="vinculo_orgao" class="form-label">√ìrg√£o</label>
                  <input
                    type="text"
                    class="form-control text-uppercase"
                    id="vinculo_orgao"
                    name="vinculo_orgao"
                    value="{{ String($json.vinculo_orgao ?? '').trim().toUpperCase() }}"
                   
                    data-force-required="true"
                  />
                </div>
                <div class="col-12 hidden" id="vinculoTempoGroup">
                  <label for="vinculo_tempo_servico" class="form-label">Tempo de servi√ßo</label>
                  <input
                    type="text"
                    class="form-control"
                    id="vinculo_tempo_servico"
                    name="vinculo_tempo_servico"
                    value="{{ String($json.vinculo_tempo ?? $json.vinculo_tempo_servico ?? '').trim() }}"
                    data-force-required="true"
                  />
                </div>
              </div>
            </div>

            <input type="hidden" id="foi_jurado" name="foi_jurado" value="{{ String($json.foi_jurado ?? $json.jurado ?? '').trim().toUpperCase() }}" />
            <input type="hidden" id="vinculo_publico" name="vinculo_publico" value="{{ String($json.vinculo_publico ?? '').trim() }}" />
          </div>
          <div class="card-footer bg-transparent border-top-0 pt-0">
            <div class="wizard-controls">
              <button type="button" class="btn btn-outline-secondary" data-action="prev">Voltar</button>
              <div class="spacer"></div>
              <button type="button" class="btn btn-outline-secondary" data-action="save-draft">Salvar rascunho</button>
              <button type="button" class="btn btn-primary" data-action="next">Avan√ßar</button>
            </div>
          </div>
        </section>
        <section class="card step-card d-none" data-step-panel="3">
          <div class="card-header">
            <h2>Documentos e declara√ß√µes</h2>
          </div>
          <div class="card-body">
            <div class="section-block">
              <h3 class="section-title">Cotas e acessibilidade</h3>
              <div class="row g-3">
                <div class="col-md-4">
                  <label for="cotasPPNI" class="form-label required">Concorrer √†s vagas PPNI?</label>
                  <select id="cotasPPNI" name="cotasPPNI" class="form-select" data-prefill="{{ $json.cotasPPNI ?? $json.concorrer_ppni ?? '' }}" required>
                    <option value="">Selecione...</option>
                    <option value="Sim">Sim</option>
                    <option value="N√£o">N√£o</option>
                  </select>
                </div>
                <div class="col-md-4">
                  <label for="is_pcd" class="form-label required">√â PCD?</label>
                  <select id="is_pcd" name="is_pcd" class="form-select" data-prefill="{{ $json.is_pcd ?? $json.withDisability ?? '' }}" required>
                    <option value="">Selecione...</option>
                    <option value="Sim">Sim</option>
                    <option value="N√£o">N√£o</option>
                  </select>
                </div>
                <div class="col-md-6 hidden" id="tipoPcdGroup">
                  <label for="tipo_pcd" class="form-label">Tipo de defici√™ncia</label>
                  <input
                    type="text"
                    class="form-control"
                    id="tipo_pcd"
                    name="tipo_pcd"
                    value="{{ String($json.tipo_pcd ?? '').trim() }}"
                    data-force-required="true"
                  />
                </div>
                <div class="col-md-6 hidden" id="pcdCidGroup">
                  <label for="pcd_cid" class="form-label">CID (se houver)</label>
                  <input type="text" class="form-control" id="pcd_cid" name="pcd_cid" value="{{ String($json.pcd_cid ?? '').trim().toUpperCase() }}" />
                </div>
                <div class="col-12" id="condicaoEspecialGroup">
                  <span class="form-label required">Necessita de condi√ß√£o especial?</span>
                  <div class="d-flex gap-3" data-prefill-radio="{{ String($json.condicao_especial ?? '').trim() }}">
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="radio"
                        name="condicao_especial"
                        id="condicao_especial_sim"
                        value="Sim"
                        data-force-required="true"
                        required
                      />
                      <label class="form-check-label" for="condicao_especial_sim">Sim</label>
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="radio"
                        name="condicao_especial"
                        id="condicao_especial_nao"
                        value="N√£o"
                        data-force-required="true"
                      />
                      <label class="form-check-label" for="condicao_especial_nao">N√£o</label>
                    </div>
                  </div>
                </div>
                <div class="col-12 hidden" id="necessidadeGroup">
                  <label for="necessidade" class="form-label">Descreva a necessidade</label>
                  <textarea
                    class="form-control"
                    id="necessidade"
                    name="necessidade"
                    rows="2"
                    placeholder="Informe recursos ou adapta√ß√µes necess√°rios"
                    data-force-required="true"
                  >{{ String($json.necessidade ?? $json.specialNeedDescription ?? '').trim() }}</textarea>
                </div>
              </div>
            </div>

            <div class="section-block">
              <h3 class="section-title">Documentos pessoais</h3>
              <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-3 upload-row">
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card required" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">ü™™</div>
                    <p class="upload-title">Documento de identifica√ß√£o (frente)</p>
                    <p class="upload-instruction">Formatos aceitos: PDF, JPG ou JPEG.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="doc_id_frente"
                      name="doc_id_frente"
                      accept=".pdf,.jpg,.jpeg"
                      required
                      aria-label="Documento de identifica√ß√£o (frente)"
                    />
                    <label class="upload-button" for="doc_id_frente">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card required" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">ü™™</div>
                    <p class="upload-title">Documento de identifica√ß√£o (verso)</p>
                    <p class="upload-instruction">Formatos aceitos: PDF, JPG ou JPEG.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="doc_id_verso"
                      name="doc_id_verso"
                      accept=".pdf,.jpg,.jpeg"
                      required
                      aria-label="Documento de identifica√ß√£o (verso)"
                    />
                    <label class="upload-button" for="doc_id_verso">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card required" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">üßæ</div>
                    <p class="upload-title">CPF</p>
                    <p class="upload-instruction">Formatos aceitos: PDF, JPG ou JPEG.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="doc_cpf"
                      name="doc_cpf"
                      accept=".pdf,.jpg,.jpeg"
                      required
                      aria-label="CPF"
                    />
                    <label class="upload-button" for="doc_cpf">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card required" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">üè†</div>
                    <p class="upload-title">Comprovante de resid√™ncia</p>
                    <p class="upload-instruction">Formatos aceitos: PDF, JPG ou JPEG.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="doc_residencia"
                      name="doc_residencia"
                      accept=".pdf,.jpg,.jpeg"
                      required
                      aria-label="Comprovante de resid√™ncia"
                    />
                    <label class="upload-button" for="doc_residencia">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card required" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">üó≥Ô∏è</div>
                    <p class="upload-title">Quita√ß√£o eleitoral</p>
                    <p class="upload-instruction">Formatos aceitos: PDF, JPG ou JPEG.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="doc_quitacao_eleitoral"
                      name="doc_quitacao_eleitoral"
                      accept=".pdf,.jpg,.jpeg"
                      required
                      aria-label="Quita√ß√£o eleitoral"
                    />
                    <label class="upload-button" for="doc_quitacao_eleitoral">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4 hidden" id="docMilitarGroup">
                  <div class="upload-card" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">üéñÔ∏è</div>
                    <p class="upload-title">Quita√ß√£o do servi√ßo militar</p>
                    <p class="upload-instruction">Candidatos do sexo masculino.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="doc_militar"
                      name="doc_militar"
                      accept=".pdf,.jpg,.jpeg"
                      data-force-required="true"
                      aria-label="Quita√ß√£o do servi√ßo militar"
                    />
                    <label class="upload-button" for="doc_militar">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
              </div>
            </div>

            <div class="section-block hidden" id="juradoDocs">
              <h3 class="section-title">Documenta√ß√£o de jurado(a)</h3>
              <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-3 upload-row">
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">‚öñÔ∏è</div>
                    <p class="upload-title">Certid√£o de atua√ß√£o</p>
                    <p class="upload-instruction">Anexe em PDF ou imagem.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="doc_jurado"
                      name="doc_jurado"
                      accept=".pdf,.jpg,.jpeg"
                      aria-label="Certid√£o de atua√ß√£o"
                    />
                    <label class="upload-button" for="doc_jurado">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">üìú</div>
                    <p class="upload-title">Certid√£o (art. 440 do CPP)</p>
                    <p class="upload-instruction">Anexe em PDF ou imagem.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="doc_jurado_440"
                      name="doc_jurado_440"
                      accept=".pdf,.jpg,.jpeg"
                      aria-label="Certid√£o (art. 440 do CPP)"
                    />
                    <label class="upload-button" for="doc_jurado_440">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
              </div>
            </div>

            <div class="section-block">
              <h3 class="section-title">Comprova√ß√£o profissional</h3>
              <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-3 upload-row">
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card required" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">üéì</div>
                    <p class="upload-title">Comprova√ß√£o da escolaridade</p>
                    <p class="upload-instruction">Formatos aceitos: PDF, JPG ou JPEG.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="doc_escolaridade"
                      name="doc_escolaridade"
                      accept=".pdf,.jpg,.jpeg"
                      required
                      aria-label="Comprova√ß√£o da escolaridade"
                    />
                    <label class="upload-button" for="doc_escolaridade">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">üìÅ</div>
                    <p class="upload-title">Experi√™ncia / t√≠tulos / certificados</p>
                    <p class="upload-instruction">Voc√™ pode anexar v√°rios arquivos.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="doc_curriculo"
                      name="doc_curriculo"
                      accept=".pdf,.jpg,.jpeg"
                      multiple
                      aria-label="Experi√™ncia, t√≠tulos ou certificados"
                    />
                    <label class="upload-button" for="doc_curriculo">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
              </div>
            </div>

            <div class="section-block hidden" id="ppniDocs">
              <h3 class="section-title">Heteroidentifica√ß√£o</h3>
              <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-3 upload-row">
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">üìù</div>
                    <p class="upload-title">Declara√ß√£o de heteroidentifica√ß√£o</p>
                    <p class="upload-instruction">Anexe em PDF ou imagem.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="het_declaracao"
                      name="het_declaracao"
                      accept=".pdf,.jpg,.jpeg"
                      aria-label="Declara√ß√£o de heteroidentifica√ß√£o"
                    />
                    <label class="upload-button" for="het_declaracao">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">üÜî</div>
                    <p class="upload-title">Documento de identidade (frente/verso)</p>
                    <p class="upload-instruction">Envie em PDF ou imagem.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="het_id"
                      name="het_id"
                      accept=".pdf,.jpg,.jpeg"
                      multiple
                      aria-label="Documento de identidade (frente/verso)"
                    />
                    <label class="upload-button" for="het_id">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">ü§≥</div>
                    <p class="upload-title">Foto de frente</p>
                    <p class="upload-instruction">Formatos aceitos: PDF, JPG ou JPEG.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="het_frente"
                      name="het_frente"
                      accept=".pdf,.jpg,.jpeg"
                      aria-label="Foto de frente"
                    />
                    <label class="upload-button" for="het_frente">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">üì∏</div>
                    <p class="upload-title">Foto de perfil</p>
                    <p class="upload-instruction">Formatos aceitos: PDF, JPG ou JPEG.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="het_perfil"
                      name="het_perfil"
                      accept=".pdf,.jpg,.jpeg"
                      aria-label="Foto de perfil"
                    />
                    <label class="upload-button" for="het_perfil">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">üé•</div>
                    <p class="upload-title">V√≠deo (at√© 20s)</p>
                    <p class="upload-instruction">Formatos aceitos: PDF, JPG ou JPEG.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="het_video"
                      name="het_video"
                      accept=".pdf,.jpg,.jpeg"
                      aria-label="V√≠deo (at√© 20 segundos)"
                    />
                    <label class="upload-button" for="het_video">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
              </div>
            </div>

            <div class="section-block hidden" id="pcdDocs">
              <h3 class="section-title">Documenta√ß√£o PCD</h3>
              <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-3 upload-row">
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">ü©∫</div>
                    <p class="upload-title">Laudo m√©dico</p>
                    <p class="upload-instruction">Formatos aceitos: PDF, JPG ou JPEG.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="pcd_laudo"
                      name="pcd_laudo"
                      accept=".pdf,.jpg,.jpeg"
                      data-force-required="true"
                      aria-label="Laudo m√©dico"
                    />
                    <label class="upload-button" for="pcd_laudo">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">üìÑ</div>
                    <p class="upload-title">Declara√ß√£o PCD (modelo do edital)</p>
                    <p class="upload-instruction">Anexe em PDF, JPG ou JPEG.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="pcd_declaracao"
                      name="pcd_declaracao"
                      accept=".pdf,.jpg,.jpeg"
                      data-force-required="true"
                      aria-label="Declara√ß√£o PCD (modelo do edital)"
                    />
                    <label class="upload-button" for="pcd_declaracao">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
                <div class="col-sm-6 col-lg-4">
                  <div class="upload-card" data-upload-card>
                    <div class="upload-emoji" aria-hidden="true">üß™</div>
                    <p class="upload-title">Exames complementares (opcional)</p>
                    <p class="upload-instruction">Envie quantos arquivos precisar.</p>
                    <input
                      type="file"
                      class="upload-input"
                      id="pcd_exames"
                      name="pcd_exames"
                      accept=".pdf,.jpg,.jpeg"
                      multiple
                      aria-label="Exames complementares"
                    />
                    <label class="upload-button" for="pcd_exames">Selecionar arquivo</label>
                    <p class="upload-filename" data-upload-filename>Nenhum arquivo selecionado</p>
                  </div>
                </div>
              </div>
            </div>

          </div>
          <div class="card-footer bg-transparent border-top-0 pt-0">
            <div class="wizard-controls">
              <button type="button" class="btn btn-outline-secondary" data-action="prev">Voltar</button>
              <div class="spacer"></div>
              <button type="button" class="btn btn-outline-secondary" data-action="save-draft">Salvar rascunho</button>
              <button type="button" class="btn btn-primary" data-action="next">Avan√ßar</button>
            </div>
          </div>
        </section>
        <section class="card step-card d-none" data-step-panel="4">
          <div class="card-header">
            <h2>Revis√£o e envio</h2>
          </div>
          <div class="card-body">
            <div class="section-block">
              <h3 class="section-title">Revise seus dados</h3>
              <p class="section-subtitle">Confira atentamente todas as informa√ß√µes antes de concluir a inscri√ß√£o. Voc√™ poder√° retornar √†s etapas anteriores para ajustar qualquer dado.</p>
              <div id="reviewSummary">
                <div class="summary-section">
                  <h3>Resumo</h3>
                  <p class="summary-placeholder mb-0">Os dados preenchidos aparecer√£o aqui quando voc√™ chegar a esta etapa.</p>
                </div>
              </div>
            </div>

            <div class="section-block">
              <h3 class="section-title">Declara√ß√£o</h3>
              <p>
                Declaro, sob as penas da Lei, que concordo com os termos que constam do Edital n¬∞ XXXX/2025 de Abertura de Inscri√ß√µes bem como declaro que aceito que os meus dados pessoais, sens√≠veis ou n√£o, sejam tratados e processados, de forma a possibilitar a efetiva execu√ß√£o da sele√ß√£o simplificada, com a aplica√ß√£o dos crit√©rios de avalia√ß√£o e sele√ß√£o, autorizando expressamente a divulga√ß√£o dos meus nomes, n√∫meros de inscri√ß√£o, crit√©rios de desempate e das minhas notas, em observ√¢ncia aos princ√≠pios da publicidade e da transpar√™ncia que regem a Administra√ß√£o P√∫blica e nos termos da Lei federal n¬∞ 13.709, de 14 de agosto de 2018; e que n√£o ser√£o fornecidas a terceiros informa√ß√µes e/ou dados pessoais, sens√≠veis ou n√£o de candidatos.
              </p>
              <p>
                Declaro, sob as penas da Lei, que os dados informados neste formul√°rio s√£o verdadeiros e que conhe√ßo e aceito todas as regras pertinentes ao concurso consignadas no Edital n¬∞ xx/2025 de Abertura de Inscri√ß√µes.
              </p>
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="termoResponsabilidade" name="termoResponsabilidade" required />
                <label class="form-check-label" for="termoResponsabilidade">Li e estou de acordo com a declara√ß√£o acima.</label>
              </div>
            </div>
          </div>
          <div class="card-footer bg-transparent border-top-0 pt-0">
            <div class="wizard-controls">
              <button type="button" class="btn btn-outline-secondary" data-action="prev">Voltar</button>
              <div class="spacer"></div>
              <button type="button" class="btn btn-outline-secondary" data-action="save-draft">Salvar rascunho</button>
              <button type="submit" class="btn btn-primary">Enviar inscri√ß√£o</button>
            </div>
          </div>
        </section>
      </form>
      <div class="submission-success" id="submissionSuccess" aria-live="polite">
        <div class="success-icon" aria-hidden="true">üéâ</div>
        <h2 class="success-title">Inscri√ß√£o enviada com sucesso!</h2>
        <p class="success-text">
          Recebemos seus documentos e dados. Guarde o n√∫mero de inscri√ß√£o
          <strong id="successRegistrationNumber">{{ String($json.inscricao ?? '').trim() || '‚Äî' }}</strong> para eventuais consultas.
        </p>
        <div class="success-actions d-flex justify-content-center">
          <button type="button" class="btn btn-primary" id="newSubmissionButton">Nova inscri√ß√£o</button>
        </div>
      </div>
    </main>
    <div class="pattern-bottom"></div>

    <div class="draft-toast" id="draftToast" role="status" aria-live="polite">
      <span>Rascunho salvo com sucesso!</span>
    </div>

    <div class="submission-loading" id="submissionLoading" aria-hidden="true" aria-live="polite">
      <div class="loading-dialog" role="status">
        <div class="spinner-border text-light mb-3" role="presentation" aria-hidden="true"></div>
        <p class="loading-text">Conferindo seus dados...</p>
      </div>
    </div>

    <div class="modal fade" id="friendlyAlert" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="friendlyAlertTitle">Aviso!</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
          </div>
          <div class="modal-body" id="friendlyAlertMessage"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Entendi</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      const form = document.getElementById('inscricaoForm');
      const wizardSteps = Array.from(document.querySelectorAll('.wizard-step'));
      const stepPanels = Array.from(document.querySelectorAll('[data-step-panel]'));
      const draftToast = document.getElementById('draftToast');
      const friendlyAlertElement = document.getElementById('friendlyAlert');
      const friendlyAlertMessage = document.getElementById('friendlyAlertMessage');
      const friendlyAlertTitle = document.getElementById('friendlyAlertTitle');
      const friendlyAlertTitleBaseClass = friendlyAlertTitle?.className || '';
      let friendlyAlertInstance;
      const submissionLoading = document.getElementById('submissionLoading');
      let submissionLoadingTimer;
      const SUBMISSION_SUSPENSE_DELAY = 2300;
      const registrationNumberElement = document.getElementById('registrationNumber');
      const registrationValueElement = registrationNumberElement?.querySelector('.registration-value');
      const successScreen = document.getElementById('submissionSuccess');
      const successRegistrationNumber = document.getElementById('successRegistrationNumber');
      const newSubmissionButton = document.getElementById('newSubmissionButton');
      const nacionalidadeSelect = document.getElementById('nacionalidade');
      const naturalidadeUfSelect = document.getElementById('naturalidade_uf');
      const naturalidadeUfLabel = document.querySelector('label[for="naturalidade_uf"]');
      const ufSelects = Array.from(document.querySelectorAll('[data-uf-select]'));
      const generoSelect = document.getElementById('genero');
      const nivelSelect = document.getElementById('nivel');
      const cargoSelect = document.getElementById('cargo');
      const cargosInscritosInput = document.getElementById('cargosInscritos');
      const especialidadeGroup = document.getElementById('especialidadeGroup');
      const especialidadeSelect = document.getElementById('especialidade');
      const especialidadeEntries = [
        {
          cargo: 'Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h',
          value: 'Cl√≠nica M√©dica',
          legacyValues: ['Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h - Especialidade: Cl√≠nica M√©dica'],
        },
        {
          cargo: 'Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h',
          value: 'Cirurgia',
          legacyValues: ['Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h - Especialidade: Cirurgia'],
        },
        {
          cargo: 'Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h',
          value: 'Ortopedia',
          legacyValues: ['Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h - Especialidade: Ortopedia'],
        },
        {
          cargo: 'Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h',
          value: 'Cardiologia',
          legacyValues: ['Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h - Especialidade: Cardiologia'],
        },
        {
          cargo: 'Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h',
          value: 'Patologia',
          legacyValues: ['Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h - Especialidade: Patologia'],
        },
        {
          cargo: 'Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h Plantonista',
          value: 'Diagn√≥stico por Imagem',
          legacyValues: ['Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h Plantonista ‚Äì Especialidade: Diagn√≥stico por Imagem'],
        },
        {
          cargo: 'Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h Plantonista',
          value: 'Cl√≠nica M√©dica',
          legacyValues: ['Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h Plantonista - Especialidade: Cl√≠nica M√©dica'],
        },
        {
          cargo: 'Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h Plantonista',
          value: 'Cirurgia',
          legacyValues: ['Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h Plantonista - Especialidade: Cirurgia'],
        },
        {
          cargo: 'Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h Plantonista',
          value: 'Anestesia',
          legacyValues: ['Analista em Sa√∫de Animal ‚Äì Veterin√°rio 40h Plantonista - Especialidade: Anestesia'],
        },
        {
          cargo: 'Analista em Sa√∫de Animal ‚Äì Veterin√°rio 20h',
          value: 'Dermatologia',
          legacyValues: ['Analista em Sa√∫de Animal ‚Äì Veterin√°rio 20h - Especialidade: Dermatologia'],
        },
      ];
      const normalizeEspecialidadeValue = (value) =>
        String(value || '')
          .normalize('NFD')
          .replace(/[\u0300-\u036f]/g, '')
          .trim()
          .toUpperCase();
      const findMatchingEspecialidade = (entries, normalizedValue) =>
        entries.find((entry) => {
          if (normalizeEspecialidadeValue(entry.value) === normalizedValue) {
            return true;
          }
          return (entry.legacyValues || []).some(
            (legacyValue) => normalizeEspecialidadeValue(legacyValue) === normalizedValue,
          );
        });

      const normalizeCargoValue = (value) =>
        String(value || '')
          .normalize('NFD')
          .replace(/[\u0300-\u036f]/g, '')
          .trim()
          .toUpperCase();

      const extractCargoEspecialidade = (value) => {
        const rawValue = String(value ?? '').trim();
        if (!rawValue) {
          return { cargo: '', especialidade: '' };
        }
        const legacyMatch = rawValue.match(/^(.*?)-\s*Especialidade:\s*(.+)$/i);
        if (legacyMatch) {
          return { cargo: legacyMatch[1].trim(), especialidade: legacyMatch[2].trim() };
        }
        const dashSeparators = [' ‚Äî ', ' ‚Äì '];
        for (const separator of dashSeparators) {
          const index = rawValue.indexOf(separator);
          if (index !== -1) {
            const cargo = rawValue.slice(0, index).trim();
            const especialidade = rawValue.slice(index + separator.length).trim();
            if (cargo && especialidade) {
              return { cargo, especialidade };
            }
          }
        }
        return { cargo: rawValue, especialidade: '' };
      };

      const parseCargosInscritos = () => {
        if (!cargosInscritosInput) return [];
        const raw = cargosInscritosInput.value?.trim();
        if (!raw) return [];
        let values = [];
        try {
          const parsed = JSON.parse(raw);
          if (Array.isArray(parsed)) {
            values = parsed;
          }
        } catch (error) {
          // Ignored ‚Äî fallback to string parsing below.
        }
        if (!values.length) {
          values = raw.split(/[;,\n]+/);
        }
        return values
          .map((value) => {
            const trimmed = String(value ?? '').trim();
            if (!trimmed) return null;
            const { cargo, especialidade } = extractCargoEspecialidade(trimmed);
            return { raw: trimmed, cargo, especialidade };
          })
          .filter(Boolean);
      };

      const buildCargosInscritosIndex = () => {
        const entries = parseCargosInscritos();
        const blockedCargos = new Set();
        const blockedEspecialidades = new Map();
        entries.forEach(({ cargo, especialidade }) => {
          const normalizedCargo = normalizeCargoValue(cargo);
          if (!normalizedCargo) return;
          if (especialidade) {
            const normalizedEspecialidade = normalizeEspecialidadeValue(especialidade);
            if (!normalizedEspecialidade) return;
            if (!blockedEspecialidades.has(normalizedCargo)) {
              blockedEspecialidades.set(normalizedCargo, new Set());
            }
            blockedEspecialidades.get(normalizedCargo).add(normalizedEspecialidade);
            return;
          }
          blockedCargos.add(normalizedCargo);
        });
        return { entries, blockedCargos, blockedEspecialidades };
      };

      const normalizeSimpleValue = (value) =>
        String(value || '')
          .normalize('NFD')
          .replace(/[\u0300-\u036f]/g, '')
          .replace(/[^a-zA-Z0-9]+/g, '')
          .toLowerCase();

      const getCargoCategory = (value) => {
        const normalized = normalizeSimpleValue(value);
        if (!normalized) return 'placeholder';
        if (normalized.includes('analista')) return 'analista';
        if (normalized.includes('tecnico')) return 'tecnico';
        if (normalized.includes('auxiliar')) return 'auxiliar';
        return 'other';
      };

      const cargoBaseOptions = cargoSelect
        ? Array.from(cargoSelect.options).map((option) => ({
            value: option.value,
            label: option.textContent,
            disabled: option.disabled,
            hidden: option.hidden,
            defaultSelected: option.defaultSelected,
            category: getCargoCategory(option.value),
          }))
        : [];

      const getNivelTier = (value) => {
        const normalized = normalizeSimpleValue(value);
        if (!normalized) return 'all';
        if (
          normalized === 'graduacao' ||
          normalized === 'posgraduacao' ||
          normalized === 'mestrado' ||
          normalized === 'doutorado'
        ) {
          return 'graduacao';
        }
        if (normalized === 'tecnico') {
          return 'tecnico';
        }
        if (normalized === 'medio' || normalized === 'fundamental') {
          return 'auxiliar';
        }
        return 'auxiliar';
      };

      const updateEspecialidadeOptions = () => {
        if (!cargoSelect || !especialidadeSelect || !especialidadeGroup) return;
        const selectedCargo = cargoSelect.value?.trim();
        const selectedCargoNormalized = normalizeCargoValue(selectedCargo);
        const storedValue = especialidadeSelect.dataset.currentValue || especialidadeSelect.value || '';
        const normalizedStored = normalizeEspecialidadeValue(storedValue);
        const normalizedPrefill = normalizeEspecialidadeValue(especialidadeSelect.dataset.prefill);
        const { blockedEspecialidades } = buildCargosInscritosIndex();
        const blockedForCargo = blockedEspecialidades.get(selectedCargoNormalized) || new Set();
        const allowedNormalizedValues = new Set(
          [normalizedPrefill, normalizedStored].filter((value) => value),
        );
        const matchingEntries = especialidadeEntries.filter(
          (entry) => normalizeCargoValue(entry.cargo) === selectedCargoNormalized,
        );
        especialidadeSelect.innerHTML = '';
        if (!matchingEntries.length) {
          especialidadeGroup.classList.add('d-none');
          especialidadeSelect.required = false;
          especialidadeSelect.removeAttribute('required');
          especialidadeSelect.value = '';
          especialidadeSelect.dataset.currentValue = '';
          especialidadeSelect.classList.remove('is-invalid');
          return;
        }
        const availableEntries = matchingEntries.filter((entry) => {
          const normalizedEntry = normalizeEspecialidadeValue(entry.value);
          if (allowedNormalizedValues.has(normalizedEntry)) {
            return true;
          }
          return !blockedForCargo.has(normalizedEntry);
        });
        if (!availableEntries.length) {
          especialidadeGroup.classList.add('d-none');
          especialidadeSelect.required = false;
          especialidadeSelect.removeAttribute('required');
          especialidadeSelect.value = '';
          especialidadeSelect.dataset.currentValue = '';
          especialidadeSelect.classList.remove('is-invalid');
          return;
        }
        especialidadeGroup.classList.remove('d-none');
        especialidadeSelect.required = true;
        especialidadeSelect.setAttribute('required', '');
        const placeholderOption = document.createElement('option');
        placeholderOption.value = '';
        placeholderOption.textContent = 'Selecione...';
        placeholderOption.disabled = true;
        placeholderOption.selected = true;
        especialidadeSelect.appendChild(placeholderOption);
        availableEntries.forEach((entry) => {
          const option = document.createElement('option');
          option.value = entry.value;
          option.textContent = entry.value;
          especialidadeSelect.appendChild(option);
        });
        let targetValue = '';
        if (normalizedPrefill) {
          const matchedPrefill = findMatchingEspecialidade(availableEntries, normalizedPrefill);
          if (matchedPrefill) {
            targetValue = matchedPrefill.value;
            delete especialidadeSelect.dataset.prefill;
          }
        }
        if (!targetValue && normalizedStored) {
          const matchedStored = findMatchingEspecialidade(availableEntries, normalizedStored);
          if (matchedStored) {
            targetValue = matchedStored.value;
          }
        }
        if (!targetValue && availableEntries.length === 1) {
          targetValue = availableEntries[0].value;
        }
        especialidadeSelect.value = targetValue;
        if (!targetValue) {
          especialidadeSelect.value = '';
        }
        placeholderOption.selected = !especialidadeSelect.value;
        especialidadeSelect.dataset.currentValue = especialidadeSelect.value || '';
      };
      const generoBaseOptions = generoSelect
        ? Array.from(generoSelect.options).map((option) => ({ value: option.value, label: option.textContent }))
        : [];
      const ufValues = [
        'AC',
        'AL',
        'AP',
        'AM',
        'BA',
        'CE',
        'DF',
        'ES',
        'GO',
        'MA',
        'MT',
        'MS',
        'MG',
        'PA',
        'PB',
        'PR',
        'PE',
        'PI',
        'RJ',
        'RN',
        'RO',
        'RR',
        'RS',
        'SC',
        'SE',
        'SP',
        'TO',
      ];
      const storageKey = 'inscricao-hospvet-draft';
      let currentStep = 0;
      let cepController;
      const visitedSteps = new Set();
      const authorizationField = document.getElementById('initialAuthorization');
      const showSubmissionSuspense = (callback, delay = SUBMISSION_SUSPENSE_DELAY) => {
        if (submissionLoadingTimer) {
          clearTimeout(submissionLoadingTimer);
          submissionLoadingTimer = null;
        }
        const executeCallback = () => {
          if (submissionLoading) {
            submissionLoading.classList.remove('is-visible');
            submissionLoading.setAttribute('aria-hidden', 'true');
          }
          submissionLoadingTimer = null;
          if (typeof callback === 'function') {
            callback();
          }
        };
        if (!submissionLoading || delay <= 0) {
          window.setTimeout(executeCallback, Math.max(delay, 0));
          return;
        }
        submissionLoading.classList.add('is-visible');
        submissionLoading.setAttribute('aria-hidden', 'false');
        submissionLoadingTimer = window.setTimeout(executeCallback, delay);
      };

      const hideSubmissionSuspense = () => {
        if (submissionLoadingTimer) {
          clearTimeout(submissionLoadingTimer);
          submissionLoadingTimer = null;
        }
        if (submissionLoading) {
          submissionLoading.classList.remove('is-visible');
          submissionLoading.setAttribute('aria-hidden', 'true');
        }
      };
      const showFriendlyAlert = (content, options = {}) => {
        if (!friendlyAlertElement || !friendlyAlertMessage) {
          window.alert(typeof content === 'string' ? content : String(content ?? ''));
          return;
        }
        const { title, titleClass } = options ?? {};
        if (friendlyAlertTitle) {
          friendlyAlertTitle.className = friendlyAlertTitleBaseClass;
          const titleText = typeof title === 'string' && title.trim() ? title : 'Aviso!';
          friendlyAlertTitle.textContent = titleText;
          if (titleClass) {
            const classes = Array.isArray(titleClass)
              ? titleClass
              : String(titleClass)
                  .split(/\s+/)
                  .filter(Boolean);
            classes.forEach((className) => friendlyAlertTitle.classList.add(className));
          }
        }
        friendlyAlertMessage.innerHTML = '';
        if (typeof content === 'string') {
          const paragraph = document.createElement('p');
          paragraph.className = 'mb-0';
          paragraph.textContent = content;
          friendlyAlertMessage.appendChild(paragraph);
        } else if (content instanceof Node) {
          friendlyAlertMessage.appendChild(content);
        } else {
          const paragraph = document.createElement('p');
          paragraph.className = 'mb-0';
          paragraph.textContent = String(content ?? '');
          friendlyAlertMessage.appendChild(paragraph);
        }
        if (typeof bootstrap !== 'undefined' && bootstrap?.Modal) {
          friendlyAlertInstance = bootstrap.Modal.getOrCreateInstance(friendlyAlertElement);
          friendlyAlertInstance.show();
        } else {
          window.alert(friendlyAlertMessage.textContent || '');
        }
      };

      const escapeSelector = (value) => {
        const stringValue = String(value ?? '');
        if (typeof CSS !== 'undefined' && CSS.escape) {
          return CSS.escape(stringValue);
        }
        return stringValue.replace(/([ !"#$%&'()*+,./:;<=>?@[\\\]^`{|}~])/g, '\\$1');
      };

      const isElementVisible = (element) => {
        if (!element) return false;
        if (element.offsetParent !== null) return true;
        return element.getClientRects().length > 0;
      };

      const getFieldLabel = (field) => {
        if (!field) return '';
        if (field.labels && field.labels.length > 0) {
          const labelText = Array.from(field.labels)
            .map((label) => label.textContent?.trim())
            .find((text) => text);
          if (labelText) {
            return labelText;
          }
        }
        let container = field.parentElement;
        while (container && container !== form) {
          const label = container.querySelector('.form-label, label');
          if (label && !label.classList.contains('form-check-label')) {
            const text = label.textContent?.trim();
            if (text) {
              return text.replace(/\s*\*+$/, '').trim();
            }
          }
          container = container.parentElement;
        }
        return field.getAttribute('placeholder')?.trim() || field.name || 'Campo obrigat√≥rio';
      };

      const getSectionName = (field) => {
        if (!field) return 'Formul√°rio';
        const sectionBlock = field.closest('.section-block');
        const sectionTitle = sectionBlock?.querySelector('.section-title')?.textContent?.trim();
        if (sectionTitle) return sectionTitle;
        const stepCard = field.closest('.step-card');
        const cardHeading = stepCard?.querySelector('.card-header h2')?.textContent?.trim();
        if (cardHeading) return cardHeading;
        return 'Formul√°rio';
      };

      const collectInvalidFields = (root, { ignoreVisibility = false } = {}) => {
        if (!root) return [];
        const items = [];
        const radioNames = new Set();
        const fields = Array.from(root.querySelectorAll('input, select, textarea'));
        fields.forEach((field) => {
          if (!field) return;
          if (field.disabled) return;
          if (field.type === 'hidden') return;
          if (field.type === 'radio') {
            if (!field.name || radioNames.has(field.name)) return;
            radioNames.add(field.name);
            const selector = `input[type="radio"][name="${escapeSelector(field.name)}"]`;
            const group = Array.from(root.querySelectorAll(selector));
            if (!group.length) return;
            const hasVisibleOption = group.some((radio) => ignoreVisibility || isElementVisible(radio));
            if (!hasVisibleOption) return;
            const hasSelection = group.some((radio) => radio.checked);
            if (!hasSelection) {
              const representative = group.find((radio) => ignoreVisibility || isElementVisible(radio)) || field;
              items.push({
                field: representative,
                label: getFieldLabel(representative),
                section: getSectionName(representative),
              });
            }
            return;
          }
          if (!ignoreVisibility && !isElementVisible(field)) return;
          if (!field.checkValidity()) {
            items.push({ field, label: getFieldLabel(field), section: getSectionName(field) });
          }
        });
        return items;
      };

      const buildMissingFieldsAlertContent = (items) => {
        const container = document.createElement('div');
        const intro = document.createElement('p');
        intro.textContent = 'Os seguintes campos obrigat√≥rios ainda precisam ser preenchidos:';
        container.appendChild(intro);
        const list = document.createElement('ul');
        list.className = 'mb-0';
        const grouped = new Map();
        items.forEach(({ label, section }) => {
          const sectionName = section || 'Formul√°rio';
          if (!grouped.has(sectionName)) {
            grouped.set(sectionName, new Set());
          }
          if (label) {
            grouped.get(sectionName).add(label);
          }
        });
        if (!grouped.size) {
          const fallback = document.createElement('li');
          fallback.textContent = 'Preencha os campos obrigat√≥rios.';
          list.appendChild(fallback);
        } else {
          grouped.forEach((labels, section) => {
            const sectionItem = document.createElement('li');
            const strong = document.createElement('strong');
            strong.textContent = section;
            sectionItem.appendChild(strong);
            const innerList = document.createElement('ul');
            labels.forEach((label) => {
              const item = document.createElement('li');
              item.textContent = label;
              innerList.appendChild(item);
            });
            sectionItem.appendChild(innerList);
            list.appendChild(sectionItem);
          });
        }
        container.appendChild(list);
        return container;
      };

      const stepHasPendingRequired = (index) => {
        const panel = stepPanels[index];
        if (!panel) return false;
        return collectInvalidFields(panel, { ignoreVisibility: true }).length > 0;
      };

      const updateWizardStepStates = () => {
        wizardSteps.forEach((step, i) => {
          const isActive = i === currentStep;
          const wasVisited = visitedSteps.has(i);
          const hasPending = stepHasPendingRequired(i);
          const shouldShowStatus = (wasVisited || i < currentStep) && !isActive;
          const isCompleted = shouldShowStatus && !hasPending && i < currentStep;
          const isWarning = shouldShowStatus && hasPending;
          step.classList.toggle('active', isActive);
          step.classList.toggle('completed', isCompleted);
          step.classList.toggle('warning', isWarning);
          step.setAttribute('aria-selected', isActive ? 'true' : 'false');
          step.setAttribute('tabindex', isActive ? '0' : '-1');
          const indexLabel = step.querySelector('.wizard-index-label');
          if (indexLabel) {
            const original = indexLabel.dataset.stepIndex || String(i + 1);
            if (isCompleted) {
              indexLabel.textContent = '‚úì';
            } else if (isWarning) {
              indexLabel.textContent = '!';
            } else {
              indexLabel.textContent = original;
            }
          }
        });
      };

      const filterCargoOptions = () => {
        if (!cargoSelect || !cargoBaseOptions.length) return;
        const previousValue = cargoSelect.value || '';
        const previousNormalized = normalizeCargoValue(previousValue);
        const { blockedCargos } = buildCargosInscritosIndex();
        const allowedValueNormalized = normalizeCargoValue(cargoSelect.dataset.prefill);
        const nivelValue = nivelSelect ? nivelSelect.value || nivelSelect.dataset.prefill : '';
        const nivelTier = getNivelTier(nivelValue);
        const filteredOptions = cargoBaseOptions.filter((option) => {
          if (!option.value) {
            return true;
          }
          const normalized = normalizeCargoValue(option.value);
          if (
            blockedCargos.size &&
            blockedCargos.has(normalized) &&
            normalized !== allowedValueNormalized &&
            normalized !== previousNormalized
          ) {
            return false;
          }
          if (nivelTier === 'all' || nivelTier === 'graduacao') {
            return true;
          }
          if (nivelTier === 'tecnico') {
            return option.category === 'tecnico' || option.category === 'auxiliar';
          }
          if (nivelTier === 'auxiliar') {
            return option.category === 'auxiliar';
          }
          return true;
        });
        cargoSelect.innerHTML = '';
        filteredOptions.forEach((optionData) => {
          const option = document.createElement('option');
          option.value = optionData.value;
          option.textContent = optionData.label;
          option.disabled = optionData.disabled;
          option.hidden = optionData.hidden;
          if (optionData.defaultSelected && !optionData.value) {
            option.selected = true;
          }
          cargoSelect.appendChild(option);
        });
        let targetValue = '';
        if (
          filteredOptions.some(
            (option) => normalizeCargoValue(option.value) === previousNormalized,
          )
        ) {
          targetValue = previousValue;
        } else if (allowedValueNormalized) {
          const allowedMatch = filteredOptions.find(
            (option) => normalizeCargoValue(option.value) === allowedValueNormalized,
          );
          if (allowedMatch) {
            targetValue = allowedMatch.value;
          }
        }
        cargoSelect.value = targetValue;
        if (!targetValue && cargoSelect.options.length > 0) {
          cargoSelect.selectedIndex = 0;
        }
        if ((cargoSelect.value || '') !== previousValue) {
          cargoSelect.dispatchEvent(new Event('change'));
        }
      };

      const resolveInitialAuthorization = () => {
        const bodyAuth = document.body?.dataset?.authorization?.trim();
        const hiddenAuth = authorizationField?.value?.trim();
        const globalAuth = typeof window !== 'undefined' ? (window.initialAuthorization || window.__AUTHORIZATION__ || '') : '';
        const queryAuth = new URLSearchParams(window.location.search).get('authorization')?.trim();
        return hiddenAuth || bodyAuth || globalAuth || queryAuth || '';
      };
      let cachedAuthorization = resolveInitialAuthorization();
      if (authorizationField && !authorizationField.value && cachedAuthorization) {
        authorizationField.value = cachedAuthorization;
      }

      const isRadioGroup = (field) => {
        if (!field) return false;
        if (typeof RadioNodeList !== 'undefined' && field instanceof RadioNodeList) return true;
        if (Array.isArray(field)) return field.length > 0 && field[0] instanceof HTMLInputElement && field[0].type === 'radio';
        const length = typeof field.length === 'number' ? field.length : 0;
        if (!length) return false;
        const first = field[0];
        return first instanceof HTMLInputElement && first.type === 'radio';
      };

      const updateUploadIndicator = (input) => {
        if (!input) return;
        const card = input.closest('[data-upload-card]');
        if (!card) return;
        const output = card.querySelector('[data-upload-filename]');
        if (!output) return;
        if (!input.files || input.files.length === 0) {
          output.textContent = 'Nenhum arquivo selecionado';
          card.classList.remove('has-file');
          return;
        }
        const names = Array.from(input.files).map((file) => file.name);
        output.textContent = input.multiple ? names.join(', ') : names[0];
        card.classList.add('has-file');
        input.classList.remove('is-invalid');
      };

      const resetUploadIndicator = (input) => {
        if (!input) return;
        input.value = '';
        updateUploadIndicator(input);
        input.classList.remove('is-invalid');
      };

      const normalizeEmail = (value) => String(value || '').trim().toLowerCase();

      let emailMismatchAlertShown = false;

      const validateEmailsMatch = (shouldAlert = false) => {
        const email = document.getElementById('email');
        const confirm = document.getElementById('email_confirm');
        if (!email || !confirm) return true;
        const normalizedEmail = normalizeEmail(email.value);
        const normalizedConfirm = normalizeEmail(confirm.value);
        if (confirm.value && email.value && normalizedEmail !== normalizedConfirm) {
          confirm.setCustomValidity('Os e-mails precisam ser iguais.');
          confirm.classList.add('is-invalid');
          if ((shouldAlert || document.activeElement !== confirm) && !emailMismatchAlertShown) {
            emailMismatchAlertShown = true;
            showFriendlyAlert('Os e-mails informados n√£o coincidem.');
          }
          return false;
        }
        emailMismatchAlertShown = false;
        confirm.setCustomValidity('');
        if (confirm.classList.contains('is-invalid') && confirm.checkValidity()) {
          confirm.classList.remove('is-invalid');
        }
        return true;
      };

      const getAuthorizationValue = () => authorizationField?.value?.trim() || cachedAuthorization || resolveInitialAuthorization();
      const showSuccessFeedback = () => {
        const registrationText = registrationValueElement?.textContent?.trim();
        if (successRegistrationNumber && registrationText) {
          successRegistrationNumber.textContent = registrationText;
        }
        if (form) {
          form.classList.add('d-none');
        }
        const wizardShell = document.querySelector('.wizard-shell');
        if (wizardShell) {
          wizardShell.classList.add('d-none');
        }
        if (successScreen) {
          successScreen.classList.add('show');
          window.scrollTo({ top: 0, behavior: 'smooth' });
        } else {
          showFriendlyAlert('Inscri√ß√£o enviada com sucesso!');
        }
      };

      const markStepVisited = (index) => {
        if (!Number.isInteger(index)) return;
        if (index < 0 || index >= stepPanels.length) return;
        visitedSteps.add(index);
      };

      const buildFormData = () => {
        const raw = new FormData(form);
        const sanitized = new FormData();
        for (const [key, value] of raw.entries()) {
          if (value instanceof File) {
            if (!value.name && value.size === 0) {
              continue;
            }
            sanitized.append(key, value);
            continue;
          }
          sanitized.append(key, value);
        }
        return sanitized;
      };

      const isValidatableElement = (field) =>
        field instanceof HTMLInputElement || field instanceof HTMLSelectElement || field instanceof HTMLTextAreaElement;

      const handleValidityState = (field) => {
        if (!isValidatableElement(field)) return;
        if (field.type === 'hidden') return;
        if (field.checkValidity()) {
          field.classList.remove('is-invalid');
        }
      };

      const applySelectPrefill = (select) => {
        if (!select) return;
        const value = select.dataset.prefill?.trim();
        if (!value) return;
        if (!select.options || !select.options.length) return;
        const option = Array.from(select.options).find((opt) => opt.value.toUpperCase() === value.toUpperCase());
        if (option) {
          select.value = option.value;
          select.dispatchEvent(new Event('change', { bubbles: true }));
          if (select.id === 'is_pcd') {
            requestAnimationFrame(() => updatePCD());
          }
        }
      };

      const selectPrefills = () => {
        document.querySelectorAll('select[data-prefill]').forEach((select) => applySelectPrefill(select));
      };

      const radioPrefills = () => {
        document.querySelectorAll('[data-prefill-radio]').forEach((group) => {
          const value = group.dataset.prefillRadio?.trim();
          if (!value) return;
          const input = group.querySelector(`input[type="radio"][value="${value}"]`) || group.querySelector(`input[type="radio"][value="${value.toUpperCase()}"]`);
          if (input) {
            input.checked = true;
            input.dispatchEvent(new Event('change'));
          }
        });
      };

      const showStep = (index) => {
        currentStep = Math.max(0, Math.min(index, stepPanels.length - 1));
        markStepVisited(currentStep);
        stepPanels.forEach((panel, i) => {
          panel.classList.toggle('d-none', i !== currentStep);
        });
        updateWizardStepStates();
        if (currentStep === stepPanels.length - 1) {
          buildReview();
        }
        window.scrollTo({ top: 0, behavior: 'smooth' });
      };

      const validateCurrentStep = () => {
        const panel = stepPanels[currentStep];
        const inputs = Array.from(panel.querySelectorAll('input, select, textarea'));
        for (const field of inputs) {
          if (!field.checkValidity()) {
            field.reportValidity();
            return false;
          }
        }
        if (currentStep === 1 && !validateEmailsMatch(true)) {
          document.getElementById('email_confirm').reportValidity();
          return false;
        }
        return true;
      };

      const goNext = () => {
        if (!validateCurrentStep()) return;
        markStepVisited(currentStep);
        showStep(currentStep + 1);
      };

      const goPrev = () => {
        markStepVisited(currentStep);
        showStep(currentStep - 1);
      };

      const toggleHiddenGroup = (condition, element) => {
        if (!element) return;
        element.classList.toggle('hidden', !condition);
        element.setAttribute('aria-hidden', (!condition).toString());
        element.querySelectorAll('input, select, textarea').forEach((field) => {
          field.toggleAttribute('required', condition && field.dataset.forceRequired === 'true');
          if (!condition) {
            field.classList.remove('is-invalid');
          }
        });
      };

      const updateGeneroOutro = () => {
        const genero = document.getElementById('genero');
        const outro = document.getElementById('generoOutroGroup');
        toggleHiddenGroup(genero.value === 'Outro', outro);
      };

      const updateMilitar = () => {
        const sexo = document.getElementById('sexo');
        const show = sexo && sexo.value === 'Masculino';
        const wrapper = document.getElementById('alistamentoWrapper');
        const docGroup = document.getElementById('docMilitarGroup');
        const militarGroup = document.getElementById('militarGroup');
        toggleHiddenGroup(show, militarGroup);
        toggleHiddenGroup(show, wrapper);
        toggleHiddenGroup(show, docGroup);
        if (docGroup) {
          const docCard = docGroup.querySelector('.upload-card');
          if (docCard) {
            docCard.classList.toggle('required', show);
          }
        }
        if (!show) {
          document.querySelectorAll('input[name="militar"]').forEach((input) => {
            input.checked = false;
          });
          if (wrapper) {
            wrapper.querySelectorAll('input').forEach((input) => {
              input.value = '';
            });
          }
          const docMilitar = document.getElementById('doc_militar');
          if (docMilitar) {
            resetUploadIndicator(docMilitar);
          }
        }
        updateGeneroOptions();
      };

      const updateJurado = () => {
        const juradoSim = document.getElementById('jurado_sim');
        const juradoNao = document.getElementById('jurado_nao');
        const detalhes = document.getElementById('juradoDetalhes');
        const docs = document.getElementById('juradoDocs');
        const hasSelection = juradoSim.checked || juradoNao.checked;
        document.getElementById('foi_jurado').value = hasSelection ? (juradoSim.checked ? 'SIM' : 'NAO') : '';
        toggleHiddenGroup(juradoSim.checked, detalhes);
        toggleHiddenGroup(juradoSim.checked, docs);
        if (!juradoSim.checked) {
          if (detalhes) {
            detalhes.querySelectorAll('input').forEach((input) => {
              input.value = '';
            });
          }
          if (docs) {
            docs.querySelectorAll('.upload-input').forEach(resetUploadIndicator);
          }
        }
      };

      const updateVinculo = () => {
        const radioSim = document.getElementById('vinculo_publico_sim');
        const radioNao = document.getElementById('vinculo_publico_nao');
        const group = document.getElementById('qualVinculoGroup');
        const cargoGroup = document.getElementById('vinculoCargoGroup');
        const orgaoGroup = document.getElementById('vinculoOrgaoGroup');
        const tempoGroup = document.getElementById('vinculoTempoGroup');
        const hasSelection = radioSim.checked || radioNao.checked;
        document.getElementById('vinculo_publico').value = hasSelection ? (radioSim.checked ? 'Sim' : 'N√£o') : '';
        toggleHiddenGroup(radioSim.checked, group);
        toggleHiddenGroup(radioSim.checked, cargoGroup);
        toggleHiddenGroup(radioSim.checked, orgaoGroup);
        toggleHiddenGroup(radioSim.checked, tempoGroup);
        if (!radioSim.checked) {
          ['qual_vinculo', 'vinculo_cargo', 'vinculo_orgao', 'vinculo_tempo_servico'].forEach((fieldId) => {
            const field = document.getElementById(fieldId);
            if (field) {
              field.value = '';
            }
          });
        }
      };

      const updatePCD = () => {
        const select = document.getElementById('is_pcd');
        const isYes = select && select.value === 'Sim';
        const docsGroup = document.getElementById('pcdDocs');
        toggleHiddenGroup(isYes, document.getElementById('tipoPcdGroup'));
        toggleHiddenGroup(isYes, document.getElementById('pcdCidGroup'));
        toggleHiddenGroup(isYes, docsGroup);
        if (docsGroup) {
          docsGroup.querySelectorAll('.upload-card').forEach((card) => {
            const input = card.querySelector('.upload-input[data-force-required="true"]');
            const shouldRequire = Boolean(input) && isYes;
            card.classList.toggle('required', shouldRequire);
          });
        }
        if (!isYes) {
          const tipo = document.getElementById('tipo_pcd');
          const cid = document.getElementById('pcd_cid');
          if (tipo) tipo.value = '';
          if (cid) cid.value = '';
          if (docsGroup) {
            docsGroup.querySelectorAll('.upload-input').forEach(resetUploadIndicator);
          }
        }
        updateNecessidade();
      };

      const updateNecessidade = () => {
        const sim = document.getElementById('condicao_especial_sim');
        const shouldShow = Boolean(sim && sim.checked);
        toggleHiddenGroup(shouldShow, document.getElementById('necessidadeGroup'));
        if (!shouldShow) {
          const necessidade = document.getElementById('necessidade');
          if (necessidade) necessidade.value = '';
        }
      };

      const updatePPNI = () => {
        const select = document.getElementById('cotasPPNI');
        toggleHiddenGroup(select.value === 'Sim', document.getElementById('ppniDocs'));
      };

      const updateGeneroOptions = () => {
        if (!generoSelect || !generoBaseOptions.length) return;
        const sexoValue = document.getElementById('sexo')?.value || '';
        const currentValue = generoSelect.value;
        generoSelect.innerHTML = '';
        generoBaseOptions.forEach((option) => {
          if (sexoValue === 'Masculino' && option.value === 'Mulher cisg√™nero') return;
          if (sexoValue === 'Feminino' && option.value === 'Homem cisg√™nero') return;
          const opt = document.createElement('option');
          opt.value = option.value;
          opt.textContent = option.label;
          generoSelect.appendChild(opt);
        });
        if (Array.from(generoSelect.options).some((option) => option.value === currentValue)) {
          generoSelect.value = currentValue;
        } else {
          generoSelect.value = '';
        }
        generoSelect.dispatchEvent(new Event('change', { bubbles: true }));
      };

      const updateNacionalidadeRequirement = () => {
        if (!naturalidadeUfSelect) return;
        const selected = (nacionalidadeSelect?.value || '').toUpperCase();
        const isBrasileira = !selected || selected === 'BRASILEIRA';
        if (isBrasileira) {
          naturalidadeUfSelect.setAttribute('required', '');
        } else {
          naturalidadeUfSelect.removeAttribute('required');
          naturalidadeUfSelect.classList.remove('is-invalid');
        }
        if (naturalidadeUfLabel) {
          naturalidadeUfLabel.classList.toggle('required', isBrasileira);
        }
      };

      const populateUfSelects = () => {
        ufSelects.forEach((select) => {
          if (!select) return;
          const fragment = document.createDocumentFragment();
          const defaultOption = document.createElement('option');
          defaultOption.value = '';
          defaultOption.textContent = 'Selecione...';
          fragment.appendChild(defaultOption);
          ufValues.forEach((uf) => {
            const option = document.createElement('option');
            option.value = uf;
            option.textContent = uf;
            fragment.appendChild(option);
          });
          select.innerHTML = '';
          select.appendChild(fragment);
          applySelectPrefill(select);
        });
      };

      const extractNacionalidadeLabel = (entry) => {
        if (!entry) return '';
        if (typeof entry === 'string') return entry;
        return (
          entry.descricao ||
          entry.descr ||
          entry.description ||
          entry.nome ||
          entry.nacionalidade ||
          entry.label ||
          entry.title ||
          ''
        );
      };

      const populateNacionalidades = async () => {
        if (!nacionalidadeSelect) return;
        const fallback = [
          'ALEM√É',
          'ANGOLANA',
          'ARGENTINA',
          'BOLIVIANA',
          'CANADENSE',
          'CHILIENA',
          'CHINESA',
          'COLOMBIANA',
          'CUBANA',
          'ESPANHOLA',
          'ESTADUNIDENSE',
          'FRANCESA',
          'HOLANDESA',
          'ITALIANA',
          'JAPONESA',
          'MO√áAMBICANA',
          'PARAGUAIA',
          'PERUANA',
          'PORTUGUESA',
          'URUGUAIA',
          'VENEZUELANA',
        ];
        const seen = new Set();
        const addLabel = (label) => {
          const normalized = String(label || '').trim().toUpperCase();
          if (!normalized) return;
          seen.add(normalized);
        };
        addLabel('BRASILEIRA');
        try {
          const response = await fetch('https://webhook-n8n-dev-conectarecife.recife.pe.gov.br/webhook/nacionalidades');
          if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
          }
          const data = await response.json();
          const entries = Array.isArray(data) ? data : Array.isArray(data?.data) ? data.data : [];
          entries.map(extractNacionalidadeLabel).filter(Boolean).forEach(addLabel);
        } catch (error) {
          console.error('Erro ao carregar nacionalidades', error);
        }
        if (seen.size === 1) {
          fallback.forEach(addLabel);
        }
        const ordered = ['BRASILEIRA', ...Array.from(seen).filter((value) => value !== 'BRASILEIRA').sort()];
        const currentValue = nacionalidadeSelect.value;
        nacionalidadeSelect.innerHTML = '';
        const defaultOption = document.createElement('option');
        defaultOption.value = '';
        defaultOption.textContent = 'Selecione...';
        nacionalidadeSelect.appendChild(defaultOption);
        ordered.forEach((label) => {
          const option = document.createElement('option');
          option.value = label;
          option.textContent = label;
          nacionalidadeSelect.appendChild(option);
        });
        if (currentValue) {
          nacionalidadeSelect.value = currentValue.toUpperCase();
        }
        applySelectPrefill(nacionalidadeSelect);
        updateNacionalidadeRequirement();
      };

      const applyUppercaseTransform = () => {
        if (!form) return;
        const inputs = Array.from(form.querySelectorAll('input[type="text"]')).filter(
          (field) => field.dataset.allowLowercase !== 'true' && field.dataset.numericOnly !== 'true',
        );
        inputs.forEach((field) => {
          field.value = field.value.toUpperCase();
          field.addEventListener('input', () => {
            const { selectionStart, selectionEnd } = field;
            const upper = field.value.toUpperCase();
            if (field.value !== upper) {
              field.value = upper;
              if (typeof field.setSelectionRange === 'function') {
                const start = selectionStart ?? upper.length;
                const end = selectionEnd ?? upper.length;
                field.setSelectionRange(start, end);
              }
            }
          });
          field.addEventListener('blur', () => {
            field.value = field.value.toUpperCase();
          });
        });
      };

      const applyLowercaseToEmails = () => {
        const emailFields = [document.getElementById('email'), document.getElementById('email_confirm')].filter(Boolean);
        emailFields.forEach((field) => {
          field.value = field.value.toLowerCase();
          field.addEventListener('input', () => {
            const { selectionStart, selectionEnd } = field;
            const lower = field.value.toLowerCase();
            if (field.value !== lower) {
              field.value = lower;
              if (typeof field.setSelectionRange === 'function') {
                const start = selectionStart ?? lower.length;
                const end = selectionEnd ?? lower.length;
                field.setSelectionRange(start, end);
              }
            }
          });
          field.addEventListener('blur', () => {
            field.value = field.value.toLowerCase();
          });
        });
      };

      const enforceNumericOnly = () => {
        document.querySelectorAll('input[data-numeric-only="true"]').forEach((field) => {
          field.addEventListener('input', () => {
            const { selectionStart, selectionEnd } = field;
            const digits = field.value.replace(/\D+/g, '');
            const max = field.maxLength && field.maxLength > 0 ? field.maxLength : undefined;
            const nextValue = typeof max === 'number' ? digits.slice(0, max) : digits;
            if (field.value !== nextValue) {
              field.value = nextValue;
              if (document.activeElement === field && typeof field.setSelectionRange === 'function') {
                const position = selectionStart ?? nextValue.length;
                const end = selectionEnd ?? nextValue.length;
                field.setSelectionRange(position, end);
              }
            }
          });
        });
      };

      const buildReview = () => {
        const summary = document.getElementById('reviewSummary');
        summary.innerHTML = '';
        const getValue = (name) => {
          const field = form.elements[name];
          if (!field) return '';
          if (isRadioGroup(field)) {
            if (typeof field.value === 'string') {
              return field.value || '';
            }
            const checked = Array.from(field).find((input) => input.checked);
            return checked ? checked.value : '';
          }
          if (field.type === 'file') {
            const files = Array.from(field.files || []);
            return files.length ? files.map((file) => file.name).join(', ') : '';
          }
          return field.value || '';
        };

        const sections = [
          {
            title: 'Dados pessoais',
            fields: [
              { label: 'Nome completo', name: 'nome' },
              { label: 'Nome social', name: 'nome_social' },
              { label: 'CPF', name: 'cpf' },
              { label: 'Data de nascimento', name: 'nasc' },
              { label: 'Nacionalidade', name: 'nacionalidade' },
              { label: 'Naturalidade', name: 'naturalidade_cidade' },
              { label: 'UF', name: 'naturalidade_uf' },
              { label: 'Nome da m√£e', name: 'mae' },
              { label: 'Nome do pai', name: 'pai' },
              { label: 'Sexo', name: 'sexo' },
              { label: 'G√™nero', name: 'genero' },
              { label: 'Outro g√™nero', name: 'genero_outro' },
              { label: 'Estado civil', name: 'estado_civil' },
              { label: 'Ra√ßa', name: 'raca' },
              { label: 'NIS', name: 'nis' },
              { label: 'RG', name: 'rg_numero' },
              { label: '√ìrg√£o RG', name: 'rg_orgao' },
              { label: 'UF RG', name: 'rg_uf' },
              { label: 'Data expedi√ß√£o RG', name: 'rg_data' },
            ],
          },
          {
            title: 'Contato e endere√ßo',
            fields: [
              { label: 'E-mail', name: 'email' },
              { label: 'Telefone 1', name: 'tel1' },
              { label: 'Telefone 2', name: 'tel2' },
              { label: 'CEP', name: 'cep' },
              { label: 'Logradouro', name: 'logradouro' },
              { label: 'N√∫mero', name: 'numero' },
              { label: 'Complemento', name: 'complemento' },
              { label: 'Bairro', name: 'bairro' },
              { label: 'Cidade', name: 'cidade' },
              { label: 'UF', name: 'uf' },
            ],
          },
          {
            title: 'Perfil profissional',
            fields: [
              { label: 'N√≠vel', name: 'nivel' },
              { label: 'Institui√ß√£o', name: 'ies' },
              { label: 'Curso', name: 'curso' },
              { label: 'Ano de conclus√£o', name: 'ano_conclusao' },
              { label: 'Cargo pretendido', name: 'cargo' },
              { label: 'Especialidade', name: 'especialidade' },
              { label: 'T√≠tulo de eleitor', name: 'titulo' },
              { label: 'Zona', name: 'zona' },
              { label: 'Se√ß√£o', name: 'secao' },
              { label: 'Servi√ßo militar', name: 'militar' },
              { label: 'Certificado de reservista', name: 'alistamento_numero' },
              { label: '√ìrg√£o do certificado', name: 'alistamento_orgao' },
              { label: 'Data do certificado', name: 'alistamento_data' },
              { label: 'Atua√ß√£o como jurado(a)', name: 'foi_jurado' },
              { label: 'Informa√ß√µes do jurado', name: 'jurado_periodo' },
              { label: 'V√≠nculo p√∫blico', name: 'vinculo_publico' },
              { label: 'Qual v√≠nculo', name: 'qual_vinculo' },
              { label: 'Cargo no v√≠nculo', name: 'vinculo_cargo' },
              { label: '√ìrg√£o do v√≠nculo', name: 'vinculo_orgao' },
              { label: 'Tempo de servi√ßo', name: 'vinculo_tempo_servico' },
            ],
          },
          {
            title: 'Inclus√£o e acessibilidade',
            fields: [
              { label: 'Concorrer PPNI', name: 'cotasPPNI' },
              { label: '√â PCD', name: 'is_pcd' },
              { label: 'Tipo de defici√™ncia', name: 'tipo_pcd' },
              { label: 'CID', name: 'pcd_cid' },
              { label: 'Condi√ß√£o especial', name: 'condicao_especial' },
              { label: 'Necessidade descrita', name: 'necessidade' },
            ],
          },
          {
            title: 'Documentos anexados',
            fields: [
              { label: 'Documento identifica√ß√£o (frente)', name: 'doc_id_frente' },
              { label: 'Documento identifica√ß√£o (verso)', name: 'doc_id_verso' },
              { label: 'CPF', name: 'doc_cpf' },
              { label: 'Comprovante de resid√™ncia', name: 'doc_residencia' },
              { label: 'Quita√ß√£o eleitoral', name: 'doc_quitacao_eleitoral' },
              { label: 'Quita√ß√£o militar', name: 'doc_militar' },
              { label: 'Certid√£o jurado', name: 'doc_jurado' },
              { label: 'Certid√£o jurado (art. 440)', name: 'doc_jurado_440' },
              { label: 'Comprova√ß√£o escolaridade', name: 'doc_escolaridade' },
              { label: 'Experi√™ncia / t√≠tulos', name: 'doc_curriculo' },
              { label: 'Declara√ß√£o heteroidentifica√ß√£o', name: 'het_declaracao' },
              { label: 'Documento heteroidentifica√ß√£o', name: 'het_id' },
              { label: 'Foto frente', name: 'het_frente' },
              { label: 'Foto perfil', name: 'het_perfil' },
              { label: 'V√≠deo', name: 'het_video' },
              { label: 'Laudo m√©dico', name: 'pcd_laudo' },
              { label: 'Declara√ß√£o PCD', name: 'pcd_declaracao' },
              { label: 'Exames complementares', name: 'pcd_exames' },
            ],
          },
        ];

        sections.forEach((section) => {
          const wrapper = document.createElement('section');
          wrapper.className = 'summary-section';
          const heading = document.createElement('h3');
          heading.textContent = section.title;
          wrapper.appendChild(heading);
          const table = document.createElement('table');
          table.className = 'summary-table';

          section.fields.forEach((field) => {
            const value = getValue(field.name);
            if (value === null || value === undefined || value === '') return;
            const row = document.createElement('tr');
            const th = document.createElement('th');
            th.textContent = field.label;
            const td = document.createElement('td');
            td.textContent = value;
            row.appendChild(th);
            row.appendChild(td);
            table.appendChild(row);
          });

          if (!table.children.length) {
            const empty = document.createElement('p');
            empty.className = 'summary-placeholder mb-0';
            empty.textContent = 'Nenhum dado informado nesta se√ß√£o.';
            wrapper.appendChild(empty);
          } else {
            wrapper.appendChild(table);
          }

          summary.appendChild(wrapper);
        });
      };

      const saveDraft = (event) => {
        if (event) {
          event.preventDefault();
          event.stopPropagation();
        }
        const data = {};
        Array.from(form.elements).forEach((field) => {
          if (!field.name) return;
          if (field.type === 'file') return;
          if (field.type === 'radio') {
            if (!field.checked) return;
            data[field.name] = field.value;
            return;
          }
          if (field.type === 'checkbox') {
            data[field.name] = field.checked;
            return;
          }
          data[field.name] = field.value;
        });
        try {
          localStorage.setItem(storageKey, JSON.stringify(data));
          if (draftToast) {
            draftToast.classList.add('show');
            setTimeout(() => draftToast.classList.remove('show'), 3200);
          } else {
            showFriendlyAlert('Rascunho salvo com sucesso!');
          }
        } catch (error) {
          console.error('Erro ao salvar rascunho', error);
          showFriendlyAlert('N√£o foi poss√≠vel salvar o rascunho neste navegador.');
        }
      };

      const loadDraft = () => {
        const raw = localStorage.getItem(storageKey);
        if (!raw) return;
        try {
          const data = JSON.parse(raw);
          Object.entries(data).forEach(([name, value]) => {
            const field = form.elements[name];
            if (!field) return;
            if (isRadioGroup(field)) {
              const radios = Array.from(field);
              const radio = radios.find((input) => input.value === value);
              if (radio) {
                radio.checked = true;
                radio.dispatchEvent(new Event('change', { bubbles: true }));
              }
              return;
            }
            if (field.type === 'checkbox') {
              field.checked = Boolean(value);
              return;
            }
            let newValue = value;
            if (field.dataset.numericOnly === 'true') {
              newValue = String(value || '').replace(/\D+/g, '');
              if (field.maxLength && field.maxLength > 0) {
                newValue = newValue.slice(0, field.maxLength);
              }
            }
            if (field.type === 'text' && field.dataset.allowLowercase !== 'true' && field.dataset.numericOnly !== 'true') {
              newValue = String(value || '').toUpperCase();
            }
            if (field.type === 'email') {
              newValue = String(value || '').toLowerCase();
            }
            if (field === nacionalidadeSelect) {
              nacionalidadeSelect.dataset.prefill = newValue;
            }
            field.value = newValue;
            field.dispatchEvent(new Event('change'));
          });
        } catch (err) {
          console.error('Erro ao carregar rascunho', err);
        }
      };

      const cepInput = document.getElementById('cep');
      const addressFields = {
        logradouro: document.getElementById('logradouro'),
        bairro: document.getElementById('bairro'),
        cidade: document.getElementById('cidade'),
        uf: document.getElementById('uf'),
      };

      const clearAddressFields = () => {
        Object.values(addressFields).forEach((field) => {
          if (field) {
            field.value = '';
          }
        });
      };

      const fillAddressFields = (data) => {
        if (!data) return;
        if (addressFields.logradouro) {
          addressFields.logradouro.value = (data.street || '').toUpperCase();
        }
        if (addressFields.bairro) {
          addressFields.bairro.value = (data.neighborhood || '').toUpperCase();
        }
        if (addressFields.cidade) {
          addressFields.cidade.value = (data.city || '').toUpperCase();
        }
        if (addressFields.uf) {
          addressFields.uf.value = (data.state || '').toUpperCase();
        }
      };

      const handleCepInput = async () => {
        if (!cepInput) return;
        const cepValue = cepInput.value.replace(/\D+/g, '');
        if (cepValue.length !== 8) {
          if (cepValue.length < 8) {
            clearAddressFields();
          }
          if (cepController) {
            cepController.abort();
            cepController = null;
          }
          return;
        }
        if (cepController) {
          cepController.abort();
        }
        cepController = new AbortController();
        try {
          const response = await fetch(`https://brasilapi.com.br/api/cep/v2/${cepValue}`, { signal: cepController.signal });
          if (!response.ok) {
            throw new Error('CEP n√£o encontrado');
          }
          const data = await response.json();
          if (cepInput.value.replace(/\D+/g, '') !== cepValue) {
            return;
          }
          fillAddressFields(data);
        } catch (error) {
          if (error.name === 'AbortError') {
            return;
          }
          clearAddressFields();
        } finally {
          cepController = null;
        }
      };

      form.addEventListener(
        'invalid',
        (event) => {
          const target = event.target;
          if (!isValidatableElement(target)) return;
          if (target.type === 'hidden') return;
          target.classList.add('is-invalid');
        },
        true,
      );

      const onFieldInteraction = (event) => {
        const target = event.target;
        if (!isValidatableElement(target)) return;
        if (target.type === 'hidden') return;
        if (target instanceof HTMLInputElement && (target.type === 'radio' || target.type === 'checkbox')) {
          const controls = target.form && target.name ? target.form.elements[target.name] : null;
          if (target.type === 'radio' && isRadioGroup(controls)) {
            Array.from(controls).forEach((control) => control.classList.remove('is-invalid'));
          } else {
            target.classList.remove('is-invalid');
          }
        } else {
          handleValidityState(target);
        }
        if (target.id === 'email' || target.id === 'email_confirm') {
          validateEmailsMatch();
        }
      };

      form.addEventListener('input', onFieldInteraction);
      form.addEventListener('change', onFieldInteraction);
      document.querySelectorAll('[data-action="next"]').forEach((btn) => btn.addEventListener('click', goNext));
      document.querySelectorAll('[data-action="prev"]').forEach((btn) => btn.addEventListener('click', goPrev));
      document.querySelectorAll('[data-action="save-draft"]').forEach((btn) => btn.addEventListener('click', saveDraft));

      wizardSteps.forEach((step) => {
        const navigateToStep = () => {
          const stepIndex = Number(step.dataset.step);
          if (!Number.isInteger(stepIndex) || stepIndex < 0 || stepIndex >= stepPanels.length) return;
          if (stepIndex === currentStep) return;
          markStepVisited(currentStep);
          showStep(stepIndex);
        };
        step.addEventListener('click', navigateToStep);
        step.addEventListener('keydown', (event) => {
          if (event.key === 'Enter' || event.key === ' ') {
            event.preventDefault();
            navigateToStep();
          }
        });
      });

      form.addEventListener('submit', (event) => {
        event.preventDefault();
        validateEmailsMatch(false);
        const pendingFields = collectInvalidFields(form, { ignoreVisibility: true });
        if (pendingFields.length > 0) {
          event.stopPropagation();
          const firstInvalid = pendingFields[0]?.field || null;
          if (firstInvalid) {
            const targetStepIndex = stepPanels.findIndex((panel) => panel.contains(firstInvalid));
            if (targetStepIndex >= 0 && targetStepIndex !== currentStep) {
              showStep(targetStepIndex);
            }
          }
          updateWizardStepStates();
          const alertContent = buildMissingFieldsAlertContent(pendingFields);
          showSubmissionSuspense(() => {
            showFriendlyAlert(alertContent, { title: '‚ùå Aviso!', titleClass: 'text-danger' });
            if (firstInvalid && typeof firstInvalid.reportValidity === 'function') {
              firstInvalid.reportValidity();
            }
            if (firstInvalid && typeof firstInvalid.focus === 'function') {
              setTimeout(() => firstInvalid.focus({ preventScroll: false }), 0);
            }
          });
          return;
        }
        if (!validateCurrentStep()) {
          event.stopPropagation();
          return;
        }
        if (!validateEmailsMatch(true)) {
          document.getElementById('email_confirm').reportValidity();
          return;
        }
        const formData = buildFormData();
        let authValue = formData.get('authorization');
        authValue = typeof authValue === 'string' ? authValue.trim() : '';
        if (!authValue) {
          authValue = getAuthorizationValue();
          formData.set('authorization', authValue);
        }
        if (authorizationField) {
          authorizationField.value = authValue;
        }
        cachedAuthorization = authValue;
        try {
          void fetch(form.action, {
            method: 'POST',
            body: formData,
          }).catch((error) => console.error('Erro ao enviar inscri√ß√£o', error));
        } catch (error) {
          console.error('Erro ao enviar inscri√ß√£o', error);
        }
        const submitButton = form.querySelector('button[type="submit"]');
        if (submitButton) {
          submitButton.disabled = true;
        }
        showSuccessFeedback();
      });

      if (nivelSelect) {
        nivelSelect.addEventListener('change', filterCargoOptions);
      }
      if (cargoSelect) {
        cargoSelect.addEventListener('change', updateEspecialidadeOptions);
      }
      if (especialidadeSelect) {
        especialidadeSelect.addEventListener('change', () => {
          especialidadeSelect.dataset.currentValue = especialidadeSelect.value || '';
        });
      }
      document.getElementById('genero').addEventListener('change', updateGeneroOutro);
      document.getElementById('sexo').addEventListener('change', updateMilitar);
      document.querySelectorAll('input[name="jurado_funcao"]').forEach((input) => input.addEventListener('change', updateJurado));
      document.querySelectorAll('input[name="vinculo_publico_opcao"]').forEach((input) => input.addEventListener('change', updateVinculo));
      document.getElementById('is_pcd').addEventListener('change', updatePCD);
      document.querySelectorAll('input[name="condicao_especial"]').forEach((input) => input.addEventListener('change', updateNecessidade));
      document.getElementById('cotasPPNI').addEventListener('change', updatePPNI);
      document.getElementById('email').addEventListener('input', validateEmailsMatch);
      document.getElementById('email_confirm').addEventListener('input', validateEmailsMatch);
      document.getElementById('email').addEventListener('blur', () => {
        if (document.getElementById('email_confirm')?.value) {
          validateEmailsMatch(true);
        }
      });
      document.getElementById('email_confirm').addEventListener('blur', () => validateEmailsMatch(true));
      if (nacionalidadeSelect) {
        nacionalidadeSelect.addEventListener('change', updateNacionalidadeRequirement);
      }
      if (newSubmissionButton) {
        newSubmissionButton.addEventListener('click', () => window.location.reload());
      }
      document.querySelectorAll('.upload-input').forEach((input) => {
        updateUploadIndicator(input);
        input.addEventListener('change', () => updateUploadIndicator(input));
      });
      if (cepInput) {
        cepInput.addEventListener('input', handleCepInput);
      }

      applyLowercaseToEmails();
      applyUppercaseTransform();
      enforceNumericOnly();
      populateUfSelects();
      filterCargoOptions();
      updateEspecialidadeOptions();
      selectPrefills();
      void populateNacionalidades();
      radioPrefills();
      loadDraft();
      updateEspecialidadeOptions();
      updateGeneroOptions();
      updateGeneroOutro();
      updateMilitar();
      updateJurado();
      updateVinculo();
      updatePCD();
      requestAnimationFrame(() => updatePCD());
      updateNecessidade();
      updatePPNI();
      updateNacionalidadeRequirement();
      handleCepInput();
      validateEmailsMatch();
      showStep(0);
    </script>   
  </body>
</html>
